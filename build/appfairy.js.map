{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.js","webpack:///external \"cheerio\"","webpack:///external \"path\"","webpack:///./src/git.js","webpack:///external \"execa\"","webpack:///external \"rimraf\"","webpack:///./src/libs/index.js","webpack:///./src/libs/fs.js","webpack:///external \"fs\"","webpack:///external \"util\"","webpack:///./src/libs/mkdirp.js","webpack:///external \"fs-extra\"","webpack:///./src/libs/ncp.js","webpack:///./src/libs/reread.js","webpack:///external \"recursive-readdir\"","webpack:///./src/libs/rimraf.js","webpack:///./src/utils/index.js","webpack:///./src/utils/internal.js","webpack:///./src/utils/requireText.js","webpack:///external \"resolve\"","webpack:///./src/writers/index.js","webpack:///./src/writers/writer.js","webpack:///./src/writers/view-writer.js","webpack:///external \"htmltojsx\"","webpack:///external \"statuses\"","webpack:///external \"uglify-js\"","webpack:///./src/raw/index.js","webpack:///./src/writers/script-writer.js","webpack:///external \"node-fetch\"","webpack:///./src/writers/style-writer.js","webpack:///external \"clean-css\""],"names":["defaultPublicSubFolders","transpile","config","inputFiles","outputFiles","Promise","all","fs","readdir","input","then","files","git","removeAppfairyFiles","push","e","console","log","folders","filter","path","extname","file","length","includes","map","folder","htmlFiles","publicSubDirs","scriptWriter","ScriptWriter","baseUrl","prefetch","styleWriter","StyleWriter","source","srouce","transpilingHTMLFiles","transpileHTMLFile","htmlFile","viewWriters","writingFiles","ViewWriter","writeAll","output","src","views","components","meta","styles","controllers","paths","write","makingPublicDir","makePublicDir","add","commit","html","readFile","toString","$","cheerio","load","$head","$body","viewWriter","name","split","slice","join","parent","isComponent","setStyles","setHTML","publicDir","public","ncp","publicSubDir","filePaths","reread","relativePaths","relativePath","relative","filePath","css","encapsulateCSS","writeFile","_","stylesDir","$styles","find","each","i","style","$style","setStyle","attr","$div","orPathRel","from","to","replace","stdout","root","execa","resolve","unstaged","results","reduce","concat","Boolean","message","stdio","diffFiles","rimraf","res","mkdir","promisify","stat","unlink","mkdirp","copy","remove","escape","str","quote","importantizeCSS","match","left","rule","right","test","trim","freeText","text","Array","baseIndent","content","line","lines","minIndent","currIndent","Infinity","freeLint","script","freeContext","freeScope","context","args","callArgs","Object","keys","upperFirst","substr","toUpperCase","splitWords","word","padLeft","char","String","parseInt","Internal","TypeError","Klass","internals","defineProperty","prototype","get","_this","forEach","key","value","bind","getOwnPropertyNames","getOwnPropertyDescriptor","publicKey","cache","requireText","resolvePath","sync","readFileSync","promise","reject","err","Writer","Error","Symbol","htmltojsx","HTMLtoJSX","createClass","flattenChildren","children","flatten","child","adjustImagesToRoot","removeHtmlFromLinks","dir","componentDir","metaDir","ctrlsDir","indexFilePath","helpersFilePath","routesFilePath","childFilePaths","routes","className","toLowerCase","index","leanViewWriters","vw","writtingRoutes","writingIndex","writingHelpers","raw","viewHelpers","comp","isNaN","Number","statuses","words","assign","ctrlClassName","metaClassName","elName","el","$el","$afEl","insertAfter","scripts","$script","type","body","$afContainer","append","contents","prepend","sockets","socketName","tagName","jsx","convert","isList","RegExp","exec","camelize","mergeProps","bindJSX","constructor","options","writingChildren","isNestedComponent","writingSelf","compose","href","exists","some","sheets","sheet","_compose","compDir","shouldHaveStyles","composeChildImports","composeProxiesDefault","_composeStyleImports","_composeProxiesDefault","socket","_composeChildImports","imported","imports","imp","_composeScriptsDeclerations","minified","uglify","minify","code","_composeScriptsInvocations","invoke","letter","sock","attrs","filename","__dirname","composeScriptLoader","scriptFileNames","fileName","fetchingScripts","scriptFileName","fetch","scriptsIndexContent","setScript","_composeScriptLoader","cleanCSS","CleanCSS","rebaseTo","composeStyleLoader","styleFileNames","fetchingStyles","styleFileName","transformSheet","stylesIndexContent","_composeStyleLoader","composeSourceReplacements","_composeSourceReplacements","_transformSheet","url"],"mappings":";;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMA,0BAA0B,CAAC,KAAD,EAAQ,OAAR,EAAiB,QAAjB,EAA2B,IAA3B,CAAhC;;AAEO,MAAMC;AAAA,+BAAY,WAAMC,MAAN,EAAgB;AACvC,QAAIC,UAAJ;AACA,QAAIC,cAAc,EAAlB;AACA,QAAI;AACF,YAAMC,QAAQC,GAAR,CAAY,CAChBC,wCAAEA,CAACC,OAAH,CAAWN,OAAOO,KAAlB,EAAyBC,IAAzB,CAA8B,iBAAS;AACrCP,qBAAaQ,KAAb;AACD,OAFD,CADgB,EAIhBC,4CAAGA,CAACC,mBAAJ,CAAwBX,MAAxB,EAAgCQ,IAAhC,CAAqC,iBAAS;AAC5CN,oBAAYU,IAAZ,CAAiB,GAAGH,KAApB;AACD,OAFD,CAJgB,CAAZ,CAAN;AAQD,KATD,CASE,OAAOI,CAAP,EAAU;AACVC,cAAQC,GAAR,CAAYF,CAAZ;AACD;;AAED,UAAMG,UAAUf,WAAWgB,MAAX,CACd;AAAA,aACE,CAACC,2CAAIA,CAACC,OAAL,CAAaC,IAAb,EAAmBC,MAApB,IAA8B,CAACvB,wBAAwBwB,QAAxB,CAAiCF,IAAjC,CADjC;AAAA,KADc,CAAhB;AAIA,QAAI;AACF,YAAMjB,QAAQC,GAAR,CACJY,QAAQO,GAAR,CAAY;AAAA,eACVlB,wCAAEA,CAACC,OAAH,CAAY,GAAEN,OAAOO,KAAM,IAAGiB,MAAO,EAArC,EAAwChB,IAAxC,CAA6C,iBAAS;AACpDP,uBAAa,CACX,IAAIA,cAAc,EAAlB,CADW,EAEX,GAAG,CAACQ,SAAS,EAAV,EAAcc,GAAd,CAAkB;AAAA,mBAAS,GAAEC,MAAO,IAAGJ,IAAK,EAA1B;AAAA,WAAlB,CAFQ,CAAb;AAID,SALD,CADU;AAAA,OAAZ,CADI,CAAN;AAUD,KAXD,CAWE,OAAOP,CAAP,EAAU;AACVC,cAAQC,GAAR,CAAYF,CAAZ;AACD;AACD,UAAMY,YAAYxB,WAAWgB,MAAX,CAAkB;AAAA,aAAQC,2CAAIA,CAACC,OAAL,CAAaC,IAAb,KAAsB,OAA9B;AAAA,KAAlB,CAAlB;;AAEA,UAAMM,gBAAgBzB,WAAWgB,MAAX,CACpB;AAAA,aAAQ,CAACC,2CAAIA,CAACC,OAAL,CAAaC,IAAb,CAAD,IAAuBtB,wBAAwBwB,QAAxB,CAAiCF,IAAjC,CAA/B;AAAA,KADoB,CAAtB;;AAIA,UAAMO,eAAe,IAAIC,qDAAJ,CAAiB;AACpCC,eAAS7B,OAAOO,KADoB;AAEpCuB,gBAAU9B,OAAO8B;AAFmB,KAAjB,CAArB;;AAKA,UAAMC,cAAc,IAAIC,oDAAJ,CAAgB;AAClCH,eAAS7B,OAAOO,KADkB;AAElCuB,gBAAU9B,OAAO8B,QAFiB;AAGlCG,cAAQjC,OAAOkC;AAHmB,KAAhB,CAApB;;AAMA,UAAMC,uBAAuBV,UAAUF,GAAV,CAAc,oBAAY;AACrD,aAAOa,kBAAkBpC,MAAlB,EAA0BqC,QAA1B,EAAoCV,YAApC,EAAkDI,WAAlD,CAAP;AACD,KAF4B,CAA7B;AAGA,UAAMO,cAAc,MAAMnC,QAAQC,GAAR,CAAY+B,oBAAZ,CAA1B;AACA,UAAMI,eAAepC,QAAQC,GAAR,CAAY,CAC/BoC,mDAAUA,CAACC,QAAX,CACEH,WADF,EAEEtC,OAAO0C,MAAP,CAAcC,GAAd,CAAkBC,KAFpB,EAGE5C,OAAO0C,MAAP,CAAcC,GAAd,CAAkBE,UAHpB,EAIE7C,OAAO0C,MAAP,CAAcC,GAAd,CAAkBG,IAJpB,EAKE9C,OAAO0C,MAAP,CAAcC,GAAd,CAAkBI,MALpB,EAME/C,OAAO0C,MAAP,CAAcC,GAAd,CAAkBK,WANpB,EAOExC,IAPF,CAOO;AAAA,aAASN,YAAYU,IAAZ,CAAiB,GAAGqC,KAApB,CAAT;AAAA,KAPP,CAD+B;AAS/B;AACA;AACA;AACAlB,gBACGmB,KADH,CACSlD,OAAO0C,MAAP,CAAcC,GAAd,CAAkBI,MAD3B,EAEGvC,IAFH,CAEQ;AAAA,aAASN,YAAYU,IAAZ,CAAiB,GAAGqC,KAApB,CAAT;AAAA,KAFR,CAZ+B,CAAZ,CAArB;;AAiBA,UAAME,kBAAkBC,cAAcpD,MAAd,EAAsB0B,aAAtB,EAAqClB,IAArC,CAA0C;AAAA,aAChEN,YAAYU,IAAZ,CAAiB,GAAGqC,KAApB,CADgE;AAAA,KAA1C,CAAxB;AAGA,QAAI;AACF,YAAM9C,QAAQC,GAAR,CAAY,CAACmC,YAAD,EAAeY,eAAf,CAAZ,CAAN;AACD,KAFD,CAEE,OAAOtC,CAAP,EAAU;AACVC,cAAQC,GAAR,CAAYF,CAAZ;AACD;;AAED,WAAOH,4CAAGA,CAAC2C,GAAJ,CAAQnD,WAAR,EAAqBF,MAArB,EAA6BQ,IAA7B,CAAkC,iBAAS;AAChD,aAAOE,4CAAGA,CAAC4C,MAAJ,CAAW7C,KAAX,EAAkB,eAAlB,CAAP;AACD,KAFM,CAAP;AAGD,GApFY;;AAAA;AAAA;AAAA;AAAA,IAAN;;AAsFP,MAAM2B;AAAA,gCAAoB,WACxBpC,MADwB,EAExBqC,QAFwB,EAGxBV,YAHwB,EAIxBI,WAJwB,EAKrB;AACH,UAAMwB,OAAO,CAAC,MAAMlD,wCAAEA,CAACmD,QAAH,CAAa,GAAExD,OAAOO,KAAM,IAAG8B,QAAS,EAAxC,CAAP,EAAmDoB,QAAnD,EAAb;AACA,UAAMC,IAAIC,8CAAOA,CAACC,IAAR,CAAaL,IAAb,CAAV;AACA,UAAMM,QAAQH,EAAE,MAAF,CAAd;AACA,QAAI,CAAC,CAAC/B,YAAF,IAAkB,CAAC,CAACI,WAAxB,EAAqC;AACnC;AACD;AACD,UAAM+B,QAAQJ,EAAE,MAAF,CAAd;AACA,UAAMK,aAAa,IAAIvB,mDAAJ,CAAe;AAChCwB,YAAM3B,SACH4B,KADG,CACG,GADH,EACQ5B,SAAS4B,KAAT,CAAe,GAAf,EAAoB5C,MAApB,GAA2B,CADnC,EAEH4C,KAFG,CAEG,GAFH,EAGHC,KAHG,CAGG,CAHH,EAGM,CAAC,CAHP,EAIHC,IAJG,CAIE,GAJF,CAD0B;AAMhCtC,eAAS7B,OAAO6B,OANgB;AAOhCuC,cAAQ/B,SAAS4B,KAAT,CAAe,GAAf,EAAoB,CAApB,MAA2B5B,QAA3B,GAAsC,IAAtC,GAA6CA,SAAS4B,KAAT,CAAe,GAAf,EAAoB,CAApB,CAPrB;AAQhCI,mBAAa,KARmB;AAShCpC,cAAQjC,OAAOiC;AATiB,KAAf,CAAnB;;AAaA;;AAEAqC,cAAUP,UAAV,EAAsBhC,WAAtB,EAAmC8B,KAAnC,EAA0CH,CAA1C,EAA6C1D,OAAO0C,MAAP,CAAcC,GAAd,CAAkBI,MAA/D;AACAwB,YAAQR,UAAR,EAAoBD,KAApB,EAA2BJ,CAA3B;;AAEA,WAAOK,UAAP;AACD,GAhCK;;AAAA;AAAA;AAAA;AAAA,IAAN;;AAkCA,MAAMX;AAAA,gCAAgB,WAAOpD,MAAP,EAAe0B,aAAf,EAAiC;AACrD,UAAM8C,YAAYxE,OAAO0C,MAAP,CAAc+B,MAAhC;AACA,UAAMtE,QAAQC,GAAR,CACJsB,cAAcH,GAAd,CAAkB,wBAAgB;AAChC,aAAOmD,iDAAGA,CACP,GAAE1E,OAAOO,KAAM,IAAGoE,YAAa,EAD3B,EAEJ,GAAEH,SAAU,IAAGG,YAAa,EAFxB,CAAP;AAID,KALD,CADI,CAAN;;AASA;AACA,UAAMC,YAAY,MAAMC,oDAAMA,CAAC7E,OAAOO,KAAd,CAAxB;;AAEA,UAAMuE,gBAAgBF,UAAUrD,GAAV,CAAc,oBAAY;AAC9C,YAAMwD,eAAe7D,2CAAIA,CAAC8D,QAAL,CAAchF,OAAOO,KAArB,EAA4B0E,QAA5B,CAArB;;AAEA,aAAQ,GAAET,SAAU,IAAGO,YAAa,EAApC;AACD,KAJqB,CAAtB;;AAMA;AACA,UAAM5E,QAAQC,GAAR,CACJ0E,cAAcvD,GAAd;AAAA,oCAAkB,WAAMwD,YAAN,EAAsB;AACtC,YAAI7D,2CAAIA,CAACC,OAAL,CAAa4D,YAAb,KAA8B,MAAlC,EAA0C;;AAE1C,YAAIG,MAAM,CAAC,MAAM7E,wCAAEA,CAACmD,QAAH,CAAYuB,YAAZ,CAAP,EAAkCtB,QAAlC,EAAV;AACA,YAAIsB,aAAad,KAAb,CAAmB,GAAnB,EAAwBc,aAAad,KAAb,CAAmB,GAAnB,EAAwB5C,MAAxB,GAA+B,CAAvD,MAA8D,eAAlE,EAAmF;AACjF6D,gBAAMC,6DAAcA,CAACD,GAAf,EAAoBlF,OAAOiC,MAA3B,CAAN;AACD;AACD,cAAM5B,wCAAEA,CAAC+E,SAAH,CAAaL,YAAb,EAA2BG,GAA3B,CAAN;AACD,OARD;;AAAA;AAAA;AAAA;AAAA,SADI,CAAN;;AAYA,WAAOJ,aAAP;AACD,GAlCK;;AAAA;AAAA;AAAA;AAAA,IAAN;;AAoCA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,MAAMR,YAAY,CAACP,UAAD,EAAahC,WAAb,EAA0B8B,KAA1B,EAAiCwB,CAAjC,EAAoCC,SAApC,KAAkD;AAClE,MAAIC,OAAJ;;AAEAA,YAAU1B,MAAM2B,IAAN,CAAW,yCAAX,CAAV;;AAEAD,UAAQE,IAAR,CAAa,CAACC,CAAD,EAAIC,KAAJ,KAAc;AACzB,UAAMC,SAAS/B,MAAM2B,IAAN,CAAWG,KAAX,CAAf;;AAEA5B,eAAW8B,QAAX,CAAoBD,OAAOE,IAAP,CAAY,MAAZ,CAApB,EAAyCF,OAAOrC,IAAP,EAAzC,EAAwD+B,SAAxD;AACAvD,gBAAY8D,QAAZ,CAAqBD,OAAOE,IAAP,CAAY,MAAZ,CAArB,EAA0CF,OAAOrC,IAAP,EAA1C;AACD,GALD;;AAOAgC,YAAU1B,MAAM2B,IAAN,CAAW,OAAX,CAAV;;AAEAD,UAAQE,IAAR,CAAa,CAACC,CAAD,EAAIC,KAAJ,KAAc;AACzB,UAAMC,SAAS/B,MAAM2B,IAAN,CAAWG,KAAX,CAAf;;AAEA5B,eAAW8B,QAAX,CAAoBD,OAAOE,IAAP,CAAY,MAAZ,CAApB,EAAyCF,OAAOrC,IAAP,EAAzC,EAAwD+B,SAAxD;AACAvD,gBAAY8D,QAAZ,CAAqBD,OAAOE,IAAP,CAAY,MAAZ,CAArB,EAA0CF,OAAOrC,IAAP,EAA1C;AACD,GALD;AAMD,CApBD;;AAsBA,MAAMgB,UAAU,CAACR,UAAD,EAAaD,KAAb,EAAoBJ,CAApB,KAA0B;AACxC;AACA;AACA,QAAMqC,OAAOrC,EAAE,OAAF,CAAb;AACAqC,OAAKxC,IAAL,CAAUO,MAAMP,IAAN,EAAV;AACAwC,OAAKD,IAAL,CAAUhC,MAAMgC,IAAN,EAAV;AACA/B,aAAWR,IAAX,GAAkBG,EAAEH,IAAF,CAAOwC,IAAP,CAAlB;AACD,CAPD,C;;;;;;ACrMA,oC;;;;;;ACAA,iC;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAMC,YAAY9E,2CAAIA,CAAC8D,QAAvB;AACA9D,2CAAIA,CAAC8D,QAAL,GAAgB,CAACiB,IAAD,EAAOC,EAAP,KACdF,UAAUC,IAAV,EAAgBC,EAAhB,EAAoBC,OAApB,CAA4B,MAA5B,EAAoC,GAApC,CADF;;AAIA;AACO,MAAM9C;AAAA,+BAAM,WAAO5C,KAAP,EAAcT,MAAd,EAAyB;AAC1C,UAAM,EAAEoG,QAAQC,IAAV,KAAmB,MAAMC,4CAAKA,CAAC,KAAN,EAAa,CAAC,WAAD,EAAc,iBAAd,CAAb,CAA/B;;AAEA7F,YAAQA,MAAMc,GAAN,CAAU;AAAA,aAAQL,2CAAIA,CAACqF,OAAL,CAAaF,IAAb,EAAmBjF,IAAnB,CAAR;AAAA,KAAV,CAAR;;AAEA,QAAIoF,WAAW,MAAMrG,QAAQC,GAAR,CAAY,CAC/BkG,4CAAKA,CAAC,KAAN,EAAa,CAAC,MAAD,EAAS,aAAT,CAAb,CAD+B,EAE/BA,4CAAKA,CAAC,KAAN,EAAa,CAAC,UAAD,EAAa,UAAb,EAAyB,oBAAzB,CAAb,CAF+B,CAAZ,EAGlB9F,IAHkB,CAGb,mBAAW;AACjB,aAAOiG,QAAQC,MAAR,CAAe,UAACF,QAAD,EAAW,EAAEJ,MAAF,EAAX,EAA0B;AAC9C,eAAOI,SAASG,MAAT,CAAgBP,OAAOnC,KAAP,CAAa,IAAb,EAAmBhD,MAAnB,CAA0B2F,OAA1B,CAAhB,CAAP;AACD,OAFM,EAEJ,EAFI,CAAP;AAGD,KAPoB,CAArB;;AASAJ,eAAWA,SAASjF,GAAT,CAAa;AAAA,aAAQL,2CAAIA,CAACqF,OAAL,CAAaF,IAAb,EAAmBjF,IAAnB,CAAR;AAAA,KAAb,CAAX;AACAX,YAAQA,MAAMQ,MAAN,CAAa;AAAA,aAAQuF,SAASlF,QAAT,CAAkBF,IAAlB,CAAR;AAAA,KAAb,CAAR;AACA,UAAMkF,4CAAKA,CAAC,KAAN,EAAa,CACjB,KADiB,EAEjB,GAAG7F,KAFc,EAGhB,GAAET,OAAO0C,MAAP,CAAcC,GAAd,CAAkB0D,IAAK,YAHT,EAIjBrG,OAAO0C,MAAP,CAAcC,GAAd,CAAkBC,KAJD,EAKjB5C,OAAO0C,MAAP,CAAcC,GAAd,CAAkBE,UALD,EAMjB7C,OAAO0C,MAAP,CAAcC,GAAd,CAAkBI,MAND;AAOjB;AACA/C,WAAO0C,MAAP,CAAc+B,MARG,CAAb,CAAN;;AAWA,WAAO,CACL,GAAGhE,KADE,EAEJ,GAAET,OAAO0C,MAAP,CAAcC,GAAd,CAAkB0D,IAAK,YAFrB,EAGLrG,OAAO0C,MAAP,CAAcC,GAAd,CAAkBC,KAHb,EAIL5C,OAAO0C,MAAP,CAAcC,GAAd,CAAkBE,UAJb,EAKL7C,OAAO0C,MAAP,CAAcC,GAAd,CAAkBI,MALb;AAML;AACA/C,WAAO0C,MAAP,CAAc+B,MAPT,CAAP;AASD,GApCY;;AAAA;AAAA;AAAA;AAAA,IAAN;;AAsCP;AACO,MAAMnB,SAAS,CAAC7C,KAAD,EAAQoG,OAAR,EAAiBC,QAAQ,SAAzB,KAAuC;AAC3D,MAAIrG,SAASA,MAAMY,MAAnB,EACE,IAAI;AACF,WAAOiF,4CAAKA,CAAC,KAAN,EAAa,CAAC,QAAD,EAAW,IAAX,EAAkB,WAAUO,OAAQ,EAApC,EAAuC,eAAvC,CAAb,EAAsE;AAC3EC;AAD2E,KAAtE,CAAP;AAGD,GAJD,CAIE,OAAOjG,CAAP,EAAU;AACV;AACD;;AAEH,SAAOyF,4CAAKA,CAAC,KAAN,EAAa,CAAC,QAAD,CAAb,EAAyB;AAC9BQ;AAD8B,GAAzB,CAAP;AAGD,CAbM;;AAeA,MAAMnG;AAAA,gCAAsB,WAAOX,MAAP,EAAkB;AACnD,UAAM,EAAEoG,QAAQW,SAAV,KAAwB,MAAMT,4CAAKA,CAAC,KAAN,EAAa,CAAC,MAAD,EAAS,aAAT,CAAb,CAApC;;AAEA,QAAIS,SAAJ,EAAe;AACb;AACA;AACA;AACA;AACA;AACA;AACAjG,cAAQC,GAAR,CAAY,CAAC,WAAD,EAAc,wCAAd,EAAwD,WAAxD,EAAqEoD,IAArE,CAA0E,IAA1E,CAAZ;AACD;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,UAAMhE,QAAQC,GAAR,CAAY;AAChB;AACA;AACA;AACA,QAAID,OAAJ,CAAY;AAAA,aAAO6G,6CAAMA,CAAE,GAAEhH,OAAO0C,MAAP,CAAcC,GAAd,CAAkB0D,IAAK,YAAjC,EAA8C;AAAA,eAAMY,KAAN;AAAA,OAA9C,CAAP;AAAA,KAAZ,CAJgB;AAKhB;AACA,QAAI9G,OAAJ,CAAY;AAAA,aAAO6G,6CAAMA,CAAChH,OAAO0C,MAAP,CAAcC,GAAd,CAAkBC,KAAzB,EAAgC;AAAA,eAAMqE,KAAN;AAAA,OAAhC,CAAP;AAAA,KAAZ,CANgB,EAOhB,IAAI9G,OAAJ,CAAY;AAAA,aAAO6G,6CAAMA,CAAChH,OAAO0C,MAAP,CAAcC,GAAd,CAAkBE,UAAzB,EAAqC;AAAA,eAAMoE,KAAN;AAAA,OAArC,CAAP;AAAA,KAAZ,CAPgB,EAQhB,IAAI9G,OAAJ,CAAY;AAAA,aAAO6G,6CAAMA,CAAChH,OAAO0C,MAAP,CAAcC,GAAd,CAAkBI,MAAzB,EAAiC;AAAA,eAAMkE,KAAN;AAAA,OAAjC,CAAP;AAAA,KAAZ,CARgB,CAAZ,CAAN;;AAWA;AACA,WAAO,CACJ,GAAEjH,OAAO0C,MAAP,CAAcC,GAAd,CAAkB0D,IAAK,YADrB,EAELrG,OAAO0C,MAAP,CAAcC,GAAd,CAAkBC,KAFb,EAGL5C,OAAO0C,MAAP,CAAcC,GAAd,CAAkBE,UAHb,EAIL7C,OAAO0C,MAAP,CAAcC,GAAd,CAAkBI,MAJb;AAKL;AACA/C,WAAO0C,MAAP,CAAc+B,MANT,CAAP;AAQD,GA1DY;;AAAA;AAAA;AAAA;AAAA,IAAN;;AA4DQ;AACbpB,KADa;AAEbC,QAFa;AAGb3C;AAHa,CAAf,E;;;;;;AC/HA,kC;;;;;;ACAA,mC;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEO,MAAMuG,QAAQC,sDAASA,CAAC9G,yCAAEA,CAAC6G,KAAb,CAAd;AACA,MAAM5G,UAAU6G,sDAASA,CAAC9G,yCAAEA,CAACC,OAAb,CAAhB;AACA,MAAMkD,WAAW2D,sDAASA,CAAC9G,yCAAEA,CAACmD,QAAb,CAAjB;AACA,MAAM4D,OAAOD,sDAASA,CAAC9G,yCAAEA,CAAC+G,IAAb,CAAb;AACA,MAAMC,SAASF,sDAASA,CAAC9G,yCAAEA,CAACgH,MAAb,CAAf;AACA,MAAMjC,YAAY+B,sDAASA,CAAC9G,yCAAEA,CAAC+E,SAAb,CAAlB;;AAEQ;AACb8B,OADa;AAEb5G,SAFa;AAGbkD,UAHa;AAIb4D,MAJa;AAKbC,QALa;AAMbjC;AANa,CAAf,E;;;;;;ACVA,+B;;;;;;ACAA,iC;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEe+B,qHAASA,CAAC9G,+CAAEA,CAACiH,MAAb,CAAf,E;;;;;;ACHA,qC;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEeH,qHAASA,CAAC9G,+CAAEA,CAACkH,IAAb,CAAf,E;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEeJ,qHAASA,CAACtC,wDAAV,CAAf,E;;;;;;ACHA,8C;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEesC,qHAASA,CAAC9G,+CAAEA,CAACmH,MAAb,CAAf,E;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEA;AACO,MAAMC,SAAS,CAACC,GAAD,EAAMC,KAAN,KAAgB;AACpCD,QAAMA,IAAIvB,OAAJ,CAAY,KAAZ,EAAmB,MAAnB,CAAN;;AAEA,UAAQwB,KAAR;AACE,SAAK,GAAL;AAAU,aAAOD,IAAIvB,OAAJ,CAAY,IAAZ,EAAkB,KAAlB,CAAP;AACV,SAAK,GAAL;AAAU,aAAOuB,IAAIvB,OAAJ,CAAY,IAAZ,EAAkB,KAAlB,CAAP;AACV,SAAK,GAAL;AAAU,aAAOuB,IAAIvB,OAAJ,CAAY,IAAZ,EAAkB,KAAlB,CAAP;AACV;AAAS,aAAOuB,IACbvB,OADa,CACL,IADK,EACC,KADD,EAEbA,OAFa,CAEL,IAFK,EAEC,KAFD,EAGbA,OAHa,CAGL,IAHK,EAGC,KAHD,CAAP;AAJX;AASD,CAZM;;AAcA,MAAMyB,kBAAmB1C,GAAD,IAAS;AACtC,SAAOA,IAAIiB,OAAJ,CAAY,kBAAZ,EAAgC,cAAhC,CAAP;AACD,CAFM;;AAIP;AACO,MAAMhB,iBAAiB,CAACD,GAAD,EAAMjD,MAAN,KAAiB;AAC7C,SAAOiD,IAAIiB,OAAJ,CACL,2DADK,EACwD,CAC7D0B,KAD6D,EACtDC,IADsD,EAChDC,IADgD,EAC1CC,KAD0C,KAE1D;;AAEH;AACA,QAAI,MAAMC,IAAN,CAAWF,IAAX,CAAJ,EAAsB,OAAOF,KAAP;AACtB;AACA,QAAI,CAACE,KAAKG,IAAL,EAAL,EAAkB,OAAOL,KAAP;;AAElB;AACA;AACAE,WAAOA,KACJ5B,OADI,CACI,0BADJ,EACgC,cADhC,CAAP;;AAGA4B,WAAOA,KACJ5B,OADI,CACI,kCADJ,EACwC,6BADxC,CAAP;;AAGA4B,WAAOA,KACJ5B,OADI,CACI,sBADJ,EAC4B,eAD5B,CAAP;;AAGA4B,WAAOA,KACJ5B,OADI,CACI,iBADJ,EACuB,UADvB,CAAP;;AAGA4B,WAAOA,KACJ5B,OADI,CACI,iBADJ,EACuB,UADvB,CAAP;;AAGA4B,WAAOA,KACJ5B,OADI,CACI,4BADJ,EACkC,EADlC,CAAP;;AAGA,YAAQlE,MAAR;AACE,WAAK,SAAL;AACE8F,eAAOA,KACJ5B,OADI,CACI,cADJ,EACoB,IADpB,CAAP;AAEA;AACF,WAAK,QAAL;AACE4B,eAAOA,KACJ5B,OADI,CACI,kBADJ,EACwB,QADxB,EAEJA,OAFI,CAEI,0CAFJ,EAEgD,kBAFhD,CAAP;AAGA;AACF;AACE4B,eAAOA,KACJ5B,OADI,CACI,cADJ,EACoB,IADpB,EAEJA,OAFI,CAEI,kBAFJ,EAEwB,QAFxB,EAGJA,OAHI,CAGI,0CAHJ,EAGgD,kBAHhD,CAAP;AAXJ;;AAiBA,WAAQ,GAAE2B,IAAK,GAAEC,IAAK,GAAEC,KAAM,EAA9B;AACD,GAhDM,CAAP;AAiDD,CAlDM;;AAoDP;AACO,MAAMG,WAAYC,IAAD,IAAU;AAChC,MAAIA,gBAAgBC,KAApB,EAA2B;AACzBD,WAAOA,KAAKjE,IAAL,CAAU,EAAV,CAAP;AACD;;AAED;AACA;AACAiE,SAAOA,KAAKjC,OAAL,CACL,yBADK,EAEL,CAAC0B,KAAD,EAAQS,UAAR,EAAoBC,OAApB,KACF;AACE,WAAOA,QACJtE,KADI,CACE,IADF,EAEJ1C,GAFI,CAEAiH,QAAS,GAAEF,UAAW,GAAEE,IAAK,EAF7B,EAGJrE,IAHI,CAGC,IAHD,CAAP;AAID,GARM,CAAP;;AAUA,QAAMsE,QAAQL,KAAKnE,KAAL,CAAW,IAAX,CAAd;;AAEA,QAAMyE,YAAYD,MAAMxH,MAAN,CAAauH,QAAQA,KAAKN,IAAL,EAArB,EAAkCxB,MAAlC,CAAyC,CAACgC,SAAD,EAAYF,IAAZ,KAAqB;AAC9E,UAAMG,aAAaH,KAAKX,KAAL,CAAW,KAAX,EAAkB,CAAlB,EAAqBxG,MAAxC;;AAEA,WAAOsH,aAAaD,SAAb,GAAyBC,UAAzB,GAAsCD,SAA7C;AACD,GAJiB,EAIfE,QAJe,CAAlB;;AAMA,SAAOH,MACJlH,GADI,CACAiH,QAAQA,KAAKtE,KAAL,CAAWwE,SAAX,CADR,EAEJvE,IAFI,CAEC,IAFD,EAGJ+D,IAHI,GAIJ/B,OAJI,CAII,SAJJ,EAIe,MAJf,CAAP;AAKD,CA9BM;;AAgCP;AACO,MAAM0C,WAAYC,MAAD,IAAY;AAClC,SAAOX,SAAU;;;SAGVA,SAASW,MAAT,CAAiB;;;GAHjB,CAAP;AAOD,CARM;;AAUP;AACO,MAAMC,cAAeD,MAAD,IAAY;AACrC,SAAOD,SAAU;;;SAGVV,SAASW,MAAT,CAAiB;;;GAHjB,CAAP;AAOD,CARM;;AAUP;AACA;AACO,MAAME,YAAY,CAACF,MAAD,EAASG,UAAU,QAAnB,EAA6BC,OAAO,EAApC,KAA2C;AAClE,QAAMC,WAAW,CAACF,OAAD,EAAUtC,MAAV,CAAiByC,OAAOC,IAAP,CAAYH,IAAZ,CAAjB,CAAjB;;AAEA,SAAOf,SAAU;;;UAGTW,MAAO;;eAEFK,SAAShF,IAAT,CAAc,IAAd,CAAoB;GAL1B,CAAP;AAOD,CAVM;;AAYP;AACO,MAAMmF,aAAc5B,GAAD,IAAS;AACjC,SAAOA,IAAI6B,MAAJ,CAAW,CAAX,EAAc,CAAd,EAAiBC,WAAjB,KAAiC9B,IAAI6B,MAAJ,CAAW,CAAX,CAAxC;AACD,CAFM;;AAIP;AACO,MAAME,aAAc/B,GAAD,IAAS;AACjC,SAAOA,IACJvB,OADI,CACI,OADJ,EACa,KADb,EAEJlC,KAFI,CAEE,eAFF,EAGJhD,MAHI,CAGGyI,QAAQA,KAAKxB,IAAL,EAHX,CAAP;AAID,CALM;;AAOP;AACO,MAAMyB,UAAU,CAACjC,GAAD,EAAMrG,MAAN,EAAcuI,OAAO,GAArB,KAA6B;AAClDlC,QAAMmC,OAAOnC,GAAP,CAAN;AACArG,WAASyI,SAASzI,SAAS,CAAT,GAAaqG,IAAIrG,MAA1B,CAAT;;AAEA,SAAOgH,MAAMhH,MAAN,EAAc8C,IAAd,CAAmByF,IAAnB,IAA2BlC,GAAlC;AACD,CALM,C;;;;;;;;;;AC9JP,MAAMqC,WAAY1E,CAAD,IAAO;AACtB,MAAI,OAAOA,CAAP,IAAY,QAAhB,EAA0B;AACxB,UAAM2E,UAAU,2BAAV,CAAN;AACD;;AAED,SAAQC,KAAD,IAAW;AAChB,QAAI,OAAOA,KAAP,IAAgB,UAApB,EAAgC;AAC9B,YAAMD,UAAU,gCAAV,CAAN;AACD;;AAED,UAAME,YAAY,EAAlB;;AAEAd,WAAOe,cAAP,CAAsBF,MAAMG,SAA5B,EAAuC/E,CAAvC,EAA0C;AACxCgF,YAAM;AACJ,cAAMC,qBAAaJ,SAAb,CAAN;;AAEAd,eAAOC,IAAP,CAAYiB,KAAZ,EAAmBC,OAAnB,CAA4BC,GAAD,IAAS;AAClC,gBAAMC,QAAQH,MAAME,GAAN,CAAd;;AAEA,cAAI,OAAOC,KAAP,IAAgB,UAApB,EAAgC;AAC9BH,kBAAME,GAAN,IAAaC,MAAMC,IAAN,CAAW,IAAX,CAAb;AACD;AACF,SAND;;AAQAtB,eAAOe,cAAP,CAAsB,IAAtB,EAA4B9E,CAA5B,EAA+B;AAC7BoF,iBAAOH;AADsB,SAA/B;;AAIA,eAAOA,KAAP;AACD;AAjBuC,KAA1C;;AAoBAlB,WAAOuB,mBAAP,CAA2BV,MAAMG,SAAjC,EAA4CG,OAA5C,CAAqDC,GAAD,IAAS;AAC3D,UAAIA,IAAI,CAAJ,KAAU,GAAd,EAAmB;;AAEnB,YAAM,EAAEC,KAAF,KAAYrB,OAAOwB,wBAAP,CAAgCX,MAAMG,SAAtC,EAAiDI,GAAjD,CAAlB;;AAEA,UAAI,OAAOC,KAAP,IAAgB,UAApB,EAAgC;;AAEhC,YAAMI,YAAYL,IAAItG,KAAJ,CAAU,CAAV,CAAlB;AACAgG,gBAAUW,SAAV,IAAuBJ,KAAvB;AACA,aAAOR,MAAMG,SAAN,CAAgBI,GAAhB,CAAP;AACD,KAVD;AAWD,GAtCD;AAuCD,CA5CD;;AA8CeT,uEAAf,E;;;;;;;AC9CA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEA,MAAMe,QAAQ,EAAd;;AAEA,MAAMC,cAAe7J,IAAD,IAAU;AAC5BA,SAAO8J,8CAAWA,CAACC,IAAZ,CAAiB/J,IAAjB,CAAP;;AAEA,SAAO4J,MAAM5J,IAAN,IAAc4J,MAAM5J,IAAN,KAAegK,uDAAYA,CAAChK,IAAb,EAAmBuC,QAAnB,EAApC;AACD,CAJD;;AAMAsH,YAAYI,OAAZ,GAAuBjK,IAAD,IAAU,IAAIf,OAAJ,CAAY,CAACoG,OAAD,EAAU6E,MAAV,KAAqB;AAC/DJ,gDAAWA,CAAC9J,IAAZ,EAAkB,CAACmK,GAAD,EAAMnK,IAAN,KAAe;AAC/B,QAAImK,GAAJ,EAAS;AACP,aAAOD,OAAOC,GAAP,CAAP;AACD;;AAED,QAAI9C,UAAUuC,MAAM5J,IAAN,CAAd;;AAEA,QAAIqH,OAAJ,EAAa;AACX,aAAOhC,QAAQgC,OAAR,CAAP;AACD;;AAED/E,uDAAQA,CAACtC,IAAT,EAAe,CAACmK,GAAD,EAAM9C,OAAN,KAAkB;AAC/B,UAAI8C,GAAJ,EAAS;AACP,eAAOD,OAAOC,GAAP,CAAP;AACD;;AAEDP,YAAM5J,IAAN,IAAcqH,UAAUA,QAAQ9E,QAAR,EAAxB;;AAEA8C,cAAQgC,OAAR;AACD,KARD;AASD,GApBD;AAqBD,CAtB+B,CAAhC;;AAwBewC,0EAAf,E;;;;;;ACnCA,oC;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;;;;ICFMO,M,GAAN,MAAMA,MAAN,CAAa;AACXpI,UAAQ;AACN,UAAMqI,MAAM,oCAAN,CAAN;AACD;AAHU,C;;;AAMED,qEAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM/I,eAAe,EAArB;;AAEA;AACA;AACA,MAAMyD,YAAY9E,2CAAIA,CAAC8D,QAAvB;AACA9D,2CAAIA,CAAC8D,QAAL,GAAgB,CAACiB,IAAD,EAAOC,EAAP,KACdF,UAAUC,IAAV,EAAgBC,EAAhB,EAAoBC,OAApB,CAA4B,MAA5B,EAAoC,GAApC,CADF;;AAGA;;AAYA,MAAMd,IAAImG,OAAO,aAAP,CAAV;AACA,MAAMC,YAAY,IAAIC,gDAAJ,CAAc,EAAEC,aAAa,KAAf,EAAd,CAAlB;;AAEA,MAAMC,kBAAkB,CAACC,WAAW,EAAZ,EAAgBC,UAAU,EAA1B,KAAiC;AACvDD,WAAStB,OAAT,CAAiBwB,SAAS;AACxBH,oBAAgBG,MAAM1G,CAAN,EAASwG,QAAzB,EAAmCC,OAAnC;AACD,GAFD;;AAIAA,UAAQlL,IAAR,CAAa,GAAGiL,QAAhB;;AAEA,SAAOC,OAAP;AACD,CARD;;AAUA,MAAME,qBAAsBzI,IAAD,IAAUA,KAAK4C,OAAL,CAAa,SAAb,EAAwB,QAAxB,CAArC;AACA,MAAM8F,sBAAuB1I,IAAD,IAAUyI,mBAAmBzI,KAAK4C,OAAL,CAAa,YAAb,EAA2B,EAA3B,EAA+BA,OAA/B,CAAuC,UAAvC,EAAmD,EAAnD,EAAuDA,OAAvD,CAA+D,UAA/D,EAA2E,SAA3E,CAAnB,CAAtC;;IAGM3D,U,WADLuH,uDAAQA,CAAC1E,CAAT,C,gBACD,MAAM7C,UAAN,SAAyB8I,+CAAzB,CAAgC;AAC9B,SAAa7I,QAAb,CAAsBH,WAAtB,EAAmC4J,GAAnC,EAAwCC,YAAxC,EAAsDC,OAAtD,EAA+D9G,SAA/D,EAA0E+G,QAA1E,EAAoF;AAAA;AAClF,YAAM/E,oDAAMA,CAAC4E,GAAP,CAAN;AACA,YAAM5E,oDAAMA,CAAC6E,YAAP,CAAN;AACA,YAAM7E,oDAAMA,CAAChC,SAAP,CAAN;AACA,YAAMgC,oDAAMA,CAAC8E,OAAP,CAAN;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA,YAAME,gBAAiB,GAAEJ,GAAI,WAA7B;AACA,YAAMK,kBAAmB,GAAEL,GAAI,gBAA/B;AACA,YAAMM,iBAAkB,GAAEN,GAAI,eAA9B;AACA,YAAMO,iBAAiB,CAACH,aAAD,EAAgBC,eAAhB,EAAiCC,cAAjC,CAAvB;AACAH,iBAAWnL,2CAAIA,CAAC8D,QAAL,CAAckH,GAAd,EAAmBG,QAAnB,CAAX;AACA,YAAMK,SAAU;;;;;;;IAOhBpK,YACCf,GADD,CAEE;AAAA,eAAe,qBAAoBwC,WAAW4I,SAAX,CAAqBxG,OAArB,CAA6B,QAA7B,EAAuC,EAAvC,CAA2C,WAAUpC,WAAWK,MAAX,GAAqB,IAAGL,WAAWK,MAAO,EAA1C,GAA8C,EAAG,IAAGL,WAAW4I,SAAX,CAAqBxG,OAArB,CAA6B,QAA7B,EAAuC,EAAvC,EAA2ClC,KAA3C,CAAiD,WAAjD,EAA8DE,IAA9D,CAAmE,GAAnE,EAAwEyI,WAAxE,EAAsF,sBAAqB7I,WAAW4I,SAAU,YAA5Q;AAAA,OAFF,EAICxI,IAJD,CAIM,OAJN,CAIe;EAXf;AAaA,YAAM0I,QAAQvK,YACXf,GADW,CACP,sBAAc;AACjB,eAAQ,uBAAsBwC,WAAW4I,SAAU,cACjD5I,WAAW4I,SACZ,GAFD;AAGD,OALW,EAMXxI,IANW,CAMN,IANM,CAAd;;AAQA,YAAM2I,kBAAkB,EAAxB;AACAxK,oBAAcsJ,gBAAgBtJ,WAAhB,CAAd;;AAEA,WAAI,MAAMyB,UAAV,IAAwBzB,WAAxB,EAAqC;AACnC,YAAG,CAACwK,gBAAgBtH,IAAhB,CAAqB;AAAA,iBAAMuH,GAAGJ,SAAH,KAAiB5I,WAAW4I,SAAlC;AAAA,SAArB,CAAJ,EAAuE;AACrEG,0BAAgBlM,IAAhB,CAAqBmD,UAArB;AACD;AACF;AACD+I,sBAAgBvC,OAAhB;AAAA,qCAAyB,WAAMxG,UAAN,EAAoB;AAC3C,gBAAMa,YAAY,MAAMb,WAAWb,KAAX,CAAiBgJ,GAAjB,EAAsBC,YAAtB,EAAoCC,OAApC,EAA6C9G,SAA7C,EAAwD+G,QAAxD,CAAxB;AACAI,yBAAe7L,IAAf,CAAoB,GAAGgE,SAAvB;AACD,SAHD;;AAAA;AAAA;AAAA;AAAA;;AAOA,YAAMoI,iBAAiB3M,wCAAEA,CAAC+E,SAAH,CAAaoH,cAAb,EAA6B3D,uDAAQA,CAAC6D,MAAT,CAA7B,CAAvB;AACA,YAAMO,eAAe5M,wCAAEA,CAAC+E,SAAH,CAAakH,aAAb,EAA4BzD,uDAAQA,CAACgE,KAAT,CAA5B,CAArB;AACA,YAAMK,iBAAiB7M,wCAAEA,CAAC+E,SAAH,CAAamH,eAAb,EAA8BY,4CAAGA,CAACC,WAAlC,CAAvB;;AAEA,YAAMjN,QAAQC,GAAR,CAAY,CAAC6M,YAAD,EAAeC,cAAf,EAA+BF,cAA/B,CAAZ,CAAN;AACA,aAAOP,cAAP;AA9DkF;AA+DnF;;AAED,MAAI5K,OAAJ,GAAc;AACZ,WAAO,KAAKwD,CAAL,EAAQxD,OAAf;AACD;;AAED,MAAIA,OAAJ,CAAYA,OAAZ,EAAqB;AACnB,SAAKwD,CAAL,EAAQxD,OAAR,GAAkBgI,OAAOhI,OAAP,CAAlB;AACD;;AAED,MAAIwC,WAAJ,CAAgBgJ,IAAhB,EAAsB;AACpB,SAAKhI,CAAL,EAAQhB,WAAR,GAAsBgJ,IAAtB;AACD;;AAED,MAAIhJ,WAAJ,GAAkB;AAChB,WAAO,KAAKgB,CAAL,EAAQhB,WAAf;AACD;;AAED,MAAIwH,QAAJ,GAAe;AACb,WAAO,KAAKxG,CAAL,EAAQwG,QAAR,CAAiB3H,KAAjB,EAAP;AACD;;AAED,MAAIF,IAAJ,CAASA,IAAT,EAAe;AACb,QAAI,CAACsJ,MAAMC,OAAOvJ,IAAP,CAAN,CAAL,EAA0B;AACxBA,aAAOwJ,+CAAQA,CAACxJ,IAAT,CAAP;AACD;;AAED,UAAMyJ,QAAQhE,yDAAUA,CAACzF,IAAX,CAAd;AACAoF,WAAOsE,MAAP,CAAc,KAAKrI,CAAL,CAAd,EAAuB;AACrBsI,qBAAeF,MACZ9G,MADY,CACL,YADK,EAEZpF,GAFY,CAER+H,iDAFQ,EAGZnF,IAHY,CAGP,EAHO,CADM;AAKrByJ,qBAAeH,MACZ9G,MADY,CACL,MADK,EAEZpF,GAFY,CAER+H,iDAFQ,EAGZnF,IAHY,CAGP,EAHO,CALM;AASrBwI,iBAAWc,MACR9G,MADQ,CACD,MADC,EAERpF,GAFQ,CAEJ+H,iDAFI,EAGRnF,IAHQ,CAGH,EAHG,CATU;AAarB0J,cAAQJ,MAAMlM,GAAN,CAAUmI,QAAQA,KAAKkD,WAAL,EAAlB,EAAsCzI,IAAtC,CAA2C,GAA3C,CAba;AAcrBH,YAAMyJ,MACH9G,MADG,CACI,MADJ,EAEHpF,GAFG,CAECmI,QAAQA,KAAKkD,WAAL,EAFT,EAGHzI,IAHG,CAGE,GAHF;AAde,KAAvB;AAmBD;;AAED,MAAIH,IAAJ,GAAW;AACT,WAAO,KAAKqB,CAAL,EAAQrB,IAAf;AACD;;AAED,MAAI2J,aAAJ,GAAoB;AAClB,WAAO,KAAKtI,CAAL,EAAQsI,aAAf;AACD;;AAED,MAAIC,aAAJ,GAAoB;AAClB,WAAO,KAAKvI,CAAL,EAAQuI,aAAf;AACD;;AAED,MAAIjB,SAAJ,GAAgB;AACd,WAAO,KAAKtH,CAAL,EAAQsH,SAAf;AACD;;AAED,MAAIkB,MAAJ,GAAa;AACX,WAAO,KAAKxI,CAAL,EAAQwI,MAAf;AACD;;AAED,MAAItK,IAAJ,CAASA,IAAT,EAAe;AACb,QAAI,CAACA,IAAL,EAAW;AACT,WAAK8B,CAAL,EAAQ9B,IAAR,GAAe,EAAf;AACA,WAAK8B,CAAL,EAAQwG,QAAR,GAAmB,EAAnB;AACA;AACD;;AAED,UAAMA,WAAY,KAAKxG,CAAL,EAAQwG,QAAR,GAAmB,EAArC;AACA,UAAMnI,IAAIC,8CAAOA,CAACC,IAAR,CAAaL,IAAb,CAAV;;AAEA;AACAG,MAAE,OAAF,EAAW+B,IAAX,CAAgB,CAACC,CAAD,EAAIoI,EAAJ,KAAW;AACzB,YAAMC,MAAMrK,EAAEoK,EAAF,CAAZ;AACA,YAAMvK,OAAOwK,IAAIxK,IAAJ,EAAb;;AAEA,UAAI2B,MAAMC,6DAAcA,CAAC5B,IAAf,EAAqB,KAAKtB,MAA1B,CAAV;AACAiD,YAAM0C,8DAAeA,CAAC1C,GAAhB,CAAN;AACA6I,UAAIxK,IAAJ,CAAS2B,GAAT;AACD,KAPD;;AASAxB,MAAE,GAAF,EAAO+B,IAAP,CAAY,CAACC,CAAD,EAAIoI,EAAJ,KAAW;AACrB,YAAMC,MAAMrK,EAAEoK,EAAF,CAAZ;AACA,UAAInB,YAAYoB,IAAIjI,IAAJ,CAAS,OAAT,CAAhB;;AAEA,UAAI6G,aAAa,CAAC,YAAY1E,IAAZ,CAAiB0E,SAAjB,CAAlB,EAA+C;AAC7CA,oBAAYA,UAAUxG,OAAV,CAAkB,YAAlB,EAAgC,aAAhC,CAAZ;;AAEA,gBAAQ,KAAKlE,MAAb;AACE,eAAK,SAAL;AACE0K,wBAAYA,UAAUxG,OAAV,CAAkB,cAAlB,EAAkC,IAAlC,CAAZ;AACA;AACF,eAAK,QAAL;AACEwG,wBAAYA,UACTxG,OADS,CACD,kBADC,EACmB,QADnB,EAETA,OAFS,CAGR,0CAHQ,EAIR,kBAJQ,CAAZ;AAMA;AACF;AACEwG,wBAAYA,UACTxG,OADS,CACD,cADC,EACe,IADf,EAETA,OAFS,CAED,kBAFC,EAEmB,QAFnB,EAGTA,OAHS,CAIR,0CAJQ,EAKR,kBALQ,CAAZ;AAbJ;;AAsBA4H,YAAIjI,IAAJ,CAAS,OAAT,EAAkB6G,SAAlB;AACD;AACF,KA/BD;;AAiCA;;AAEA,QAAImB,KAAKpK,EAAE,SAAF,EAAa,CAAb,CAAT;AACA,WAAOoK,EAAP,EAAW;;AAET,YAAMC,MAAMrK,EAAEoK,EAAF,CAAZ;AACA,YAAMD,SAASE,IAAIjI,IAAJ,CAAS,OAAT,CAAf;AACA,YAAMkI,QAAQtK,EAAG,OAAMmK,MAAO,SAAQA,MAAO,GAA/B,CAAd;AACA;AACA;AACAE,UAAIjI,IAAJ,CAAS,OAAT,EAAkB,IAAlB;AACA;AACAkI,YAAMC,WAAN,CAAkBF,GAAlB;AACA;AACA;AACA;AACA;AACAA,UAAIvG,MAAJ;;AAEA,YAAMuE,QAAQ,IAAIvJ,UAAJ,CAAe;AAC3BwB,cAAM6J,MADqB;AAE3BtK,cAAMG,EAAEH,IAAF,CAAOwK,GAAP,CAFqB;AAG3BlM,iBAAS,KAAKA,OAHa;AAI3BkB,gBAAQ,KAAKA,MAJc;AAK3BsB,qBAAa;AALc,OAAf,CAAd;;AAQAwH,eAASjL,IAAT,CAAcmL,KAAd;AACA+B,WAAKpK,EAAE,SAAF,EAAa,CAAb,CAAL;AACD;;AAED;AACAA,MAAE,aAAF,EAAiB8D,MAAjB;AACA;AACA9D,MAAE,YAAF,EACGH,IADH,CACQ,EADR,EAEGuC,IAFH,CAEQ,UAFR,EAEoB,IAFpB;;AAIA,SAAKT,CAAL,EAAQ6I,OAAR,GAAkB,EAAlB;;AAEA;AACAxK,MAAE,QAAF,EAAY+B,IAAZ,CAAiB,CAACC,CAAD,EAAIoD,MAAJ,KAAe;AAC9B,YAAMqF,UAAUzK,EAAEoF,MAAF,CAAhB;AACA,YAAMnG,MAAMwL,QAAQrI,IAAR,CAAa,KAAb,CAAZ;AACA,YAAMsI,OAAOD,QAAQrI,IAAR,CAAa,MAAb,CAAb;;AAEA;AACA,UAAIsI,QAAQ,CAAC,cAAcnG,IAAd,CAAmBmG,IAAnB,CAAb,EAAuC;;AAEvC,UAAIzL,GAAJ,EAAS;AACP,aAAK0C,CAAL,EAAQ6I,OAAR,CAAgBtN,IAAhB,CAAqB;AACnBwN,gBAAM,KADa;AAEnBC,gBAAM1L;AAFa,SAArB;AAID,OALD,MAKO;AACL,aAAK0C,CAAL,EAAQ6I,OAAR,CAAgBtN,IAAhB,CAAqB;AACnBwN,gBAAM,MADa;AAEnBC,gBAAMF,QAAQ5K,IAAR;AAFa,SAArB;AAID;;AAED4K,cAAQ3G,MAAR;AACD,KArBD;;AAuBA;AACA,UAAM1D,QAAQJ,EAAE,MAAF,CAAd;AACA,UAAM4K,eAAe5K,EAAE,+DAAF,CAArB;;AAEA4K,iBAAaC,MAAb,CAAoBzK,MAAM0K,QAAN,EAApB;AACAF,iBAAaG,OAAb,CAAqB,MAArB;AACAH,iBAAaC,MAAb,CAAoB,MAApB;AACAzK,UAAMyK,MAAN,CAAaD,YAAb;;AAEA/K,WAAOO,MAAMP,IAAN,EAAP;;AAEA,SAAK8B,CAAL,EAAQ9B,IAAR,GAAeA,IAAf;;AAEA,UAAMmL,UAAW,KAAKrJ,CAAL,EAAQqJ,OAAR,GAAkB,EAAnC;;AAEA;AACAhL,MAAE,WAAF,EAAe+B,IAAf,CAAoB,CAACC,CAAD,EAAIoI,EAAJ,KAAW;AAC7B,YAAMC,MAAMrK,EAAEoK,EAAF,CAAZ;AACA,YAAMa,aAAaZ,IAAIjI,IAAJ,CAAS,SAAT,CAAnB;AACA4I,cAAQ9N,IAAR,CAAa+N,UAAb;;AAEAZ,UAAIjI,IAAJ,CAAS,SAAT,EAAoB,IAApB;AACA;AACAgI,SAAGc,OAAH,IAAe,YAAWD,UAAW,EAArC;AACD,KARD;;AAUA;AACApL,WAAOO,MAAMP,IAAN,EAAP;;AAIA;AACA,QAAIsL,MAAMpD,UAAUqD,OAAV,CAAkB7C,oBAAoB1I,IAApB,CAAlB,EAA6C2E,IAA7C,EAAV;;AAEA;AACA2D,aAAStB,OAAT,CAAiB,CAACwB,KAAD,EAAQc,KAAR,KAAkB;AACjC,YAAMkC,SAAU,IAAIC,MAAJ,CAAY,QAAOjD,MAAM8B,MAAO,cAAhC,EAA+C,EAA/C,CAAD,CAAqDoB,IAArD,CAA0DJ,GAA1D,CAAf;AACA,UAAIE,MAAJ,EAAY;AACV,aAAK1J,CAAL,EAAQqJ,OAAR,CAAgB9N,IAAhB,CAAsB,GAAEsO,SAASnD,MAAMY,SAAf,CAA0B,OAAME,KAAM,EAA9D;AACAgC,cAAMA,IAAI1I,OAAJ,CACJ,IAAI6I,MAAJ,CAAY,QAAOjD,MAAM8B,MAAO,cAAhC,EAA+C,EAA/C,CADI,EAEH,iBAAgBqB,SAASnD,MAAMY,SAAf,CAA0B,OAAME,KAAM,gCAA+BsC,WACpF,EADoF,CAEpF,8DAJE,CAAN;AAOD,OATD,MASO;AACLN,cAAMA,IAAI1I,OAAJ,CACJ,IAAI6I,MAAJ,CAAY,QAAOjD,MAAM8B,MAAO,WAAhC,EAA4C,CAAC,KAAKxI,CAAL,EAAQhB,WAAT,GAAuB,GAAvB,GAA6B,EAAzE,CADI,EAEJ,CAAC,KAAKgB,CAAL,EAAQhB,WAAT,GAAwB,IAAG0H,MAAMY,SAAU,+BAA3C,GACC,iBAAgBZ,MAAMY,SAAU,IAAGE,KAAM,iBAAgBd,MAAMY,SAAU,eAAcwC,WACtF,EADsF,CAEtF,8CAA6CpD,MAAMY,SAAU,gBAL3D,CAAN;AAQD;AACF,KArBD;;AAuBA;AACA,SAAKtH,CAAL,EAAQwJ,GAAR,GAAcO,QAAQP,GAAR,EAAahD,QAAb,CAAd;AACD;;AAED,MAAIqC,OAAJ,GAAc;AACZ,WAAO,KAAK7I,CAAL,EAAQ6I,OAAR,GAAkB,KAAK7I,CAAL,EAAQ6I,OAAR,CAAgBhK,KAAhB,EAAlB,GAA4C,EAAnD;AACD;;AAED,MAAInB,MAAJ,GAAa;AACX,WAAO,KAAKsC,CAAL,EAAQtC,MAAR,CAAemB,KAAf,EAAP;AACD;;AAED,MAAIX,IAAJ,GAAW;AACT,WAAO,KAAK8B,CAAL,EAAQ9B,IAAf;AACD;;AAED,MAAIsL,GAAJ,GAAU;AACR,WAAO,KAAKxJ,CAAL,EAAQwJ,GAAf;AACD;;AAED,MAAIH,OAAJ,GAAc;AACZ,WAAO,KAAKrJ,CAAL,EAAQqJ,OAAR,IAAmB,CAAC,GAAG,KAAKrJ,CAAL,EAAQqJ,OAAZ,CAA1B;AACD;;AAED,MAAIzM,MAAJ,GAAa;AACX,WAAO,KAAKoD,CAAL,EAAQpD,MAAf;AACD;;AAED,MAAIA,MAAJ,CAAWA,MAAX,EAAmB;AACjB,SAAKoD,CAAL,EAAQpD,MAAR,GAAiB4H,OAAO5H,MAAP,CAAjB;AACD;;AAEDoN,cAAYC,OAAZ,EAAqB;AACnB;;AAEA,SAAKjK,CAAL,EAAQwG,QAAR,GAAmB,EAAnB;AACA,SAAKxG,CAAL,EAAQtC,MAAR,GAAiBuM,QAAQvM,MAAR,IAAkB,EAAnC;;AAEA,SAAKiB,IAAL,GAAYsL,QAAQtL,IAApB;AACA,SAAKI,MAAL,GAAckL,QAAQlL,MAAtB;AACA,SAAKC,WAAL,GAAmBiL,QAAQjL,WAA3B;AACA,SAAKd,IAAL,GAAY+L,QAAQ/L,IAApB;AACA,SAAKtB,MAAL,GAAcqN,QAAQrN,MAAtB;AACD;;AAEKiB,OAAN,CAAYgJ,GAAZ,EAAiBC,YAAjB,EAA+BC,OAA/B,EAAwC9G,SAAxC,EAAmD+G,QAAnD,EAA6D;AAAA;;AAAA;AAC3D,YAAMpH,WAAY,GAAEiH,GAAI,IAAG,MAAKS,SAAU,KAA1C;AACA,YAAMF,iBAAiB,CAACxH,QAAD,CAAvB;AACA,YAAMsK,kBAAkB,MAAKlK,CAAL,EAAQwG,QAAR,CAAiBtK,GAAjB;AAAA,sCAAqB,WAAMwK,KAAN,EAAe;AAC1D,cAAG,CAACxJ,aAAajB,QAAb,CAAsByK,MAAMY,SAA5B,CAAJ,EAA2C;AACzCpK,yBAAa3B,IAAb,CAAkBmL,MAAMY,SAAxB;AACA,kBAAM/H,YAAY,MAAMmH,MAAM7I,KAAN,CAAYiJ,YAAZ,EAA0BA,YAA1B,EAAwCC,OAAxC,EAAiD9G,SAAjD,EAA4D+G,QAA5D,CAAxB;AACAI,2BAAe7L,IAAf,CAAoB,GAAGgE,SAAvB;AACD;AACF,SANuB;;AAAA;AAAA;AAAA;AAAA,WAAxB;AAOA,YAAM4K,oBAAoBtD,QAAQC,YAAlC;AACA,UAAIsD,WAAJ;;AAEA,UAAI,CAAClN,aAAajB,QAAb,CAAuB,GAAE,MAAKqL,SAAU,KAAxC,CAAL,EAAoD;AAClD,YAAI;AACF,gBAAMtM,wCAAEA,CAACmD,QAAH,CAAa,GAAE0I,GAAI,IAAG,MAAKS,SAAU,KAArC,CAAN;AACD,SAFD,CAEE,OAAM9L,CAAN,EAAS;AACT;AACA4O,wBAAcpP,wCAAEA,CAAC+E,SAAH,CACX,GAAE8G,GAAI,IAAG,MAAKS,SAAU,KADb,EAEZ,MAAKtH,CAAL,EAAQqK,OAAR,CACExO,2CAAIA,CAAC8D,QAAL,CAAckH,GAAd,EAAmBC,YAAnB,CADF,EAEEjL,2CAAIA,CAAC8D,QAAL,CAAckH,GAAd,EAAmBE,OAAnB,CAFF,EAGElL,2CAAIA,CAAC8D,QAAL,CAAckH,GAAd,EAAmB5G,SAAnB,CAHF,EAIE+G,QAJF,EAKE,CAACmD,iBALH,CAFY,CAAd;AAUD;AACF;;AAGD,UAAI;AACF,cAAMrP,QAAQC,GAAR,CAAY,CAAC,GAAGmP,eAAJ,EAAqBE,WAArB,CAAZ,CAAN;AACD,OAFD,CAEE,OAAM5O,CAAN,EAAS;AACTC,gBAAQC,GAAR,CAAYF,CAAZ;AACD;AACD,aAAO4L,cAAP;AArC2D;AAsC5D;;AAEK5G,UAAN,CAAe8J,IAAf,EAAqBpH,OAArB,EAA8BjD,SAA9B,EAAyC;AAAA;;AAAA;AACvC,UAAI8I,IAAJ;AACA,UAAIC,IAAJ;;AAEA,UAAIsB,IAAJ,EAAU;AACRvB,eAAO,MAAP;AACAC,eAAO,YAAYpG,IAAZ,CAAiB0H,IAAjB,IAAyBA,IAAzB,GAAgCzO,2CAAIA,CAACqF,OAAL,CAAa,GAAb,EAAkBoJ,IAAlB,CAAvC;AACD,OAHD,MAGO;AACLvB,eAAO,OAAP;AACAC,eAAO9F,OAAP;AACD;;AAED,YAAMqH,SAAS,OAAKvK,CAAL,EAAQtC,MAAR,CAAe8M,IAAf,CAAoB,iBAAS;AAC1C,eAAOlK,MAAM0I,IAAN,IAAcA,IAArB;AACD,OAFc,CAAf;;AAIA,UAAI,CAACuB,MAAL,EAAa;AACX,eAAKvK,CAAL,EAAQtC,MAAR,CAAenC,IAAf,CAAoB,EAAEwN,IAAF,EAAQC,IAAR,EAApB;AACD;;AAED,YAAMyB,SAAS,OAAKzK,CAAL,EAAQtC,MAAR,CACZxB,GADY,CACR,UAAC,EAAE6M,IAAF,EAAQC,IAAR,EAAD,EAAoB;AACvB,eAAOD,QAAQ,OAAR,IAAmBC,IAA1B;AACD,OAHY,EAIZpN,MAJY,CAIL2F,OAJK,CAAf;;AAMA,UAAI1B,MAAM,EAAV;;AAEA;AACA;AACA;;;AAGAA,aAAO,MAAP;;AAEAA,aAAO4K,OACJvO,GADI,CACA,iBAAS;AACZ,eAAOwO,KAAP;AACD,OAHI,EAIJ5L,IAJI,CAIC,MAJD,CAAP;AAKA,UAAG,CAACmB,SAAD,IAAc,CAACJ,IAAI7D,MAAtB,EAA8B,OAAO,IAAP;AAC9B,UAAI;AACF,cAAMiG,oDAAMA,CAAChC,SAAP,CAAN;AACA,cAAMjF,wCAAEA,CAAC+E,SAAH,CAAc,GAAEE,SAAU,IAAG,OAAKqH,SAAU,MAA5C,EAAoDlF,qDAAMA,CAACvC,IAAIgD,IAAJ,EAAP,CAApD,CAAN;AACD,OAHD,CAGE,OAAMrH,CAAN,EAAS;AACTC,gBAAQC,GAAR,CAAYF,CAAZ;AACD;AA9CsC;AA+CxC;;AAEDmP,WAASC,OAAT,EAAkB7D,OAAlB,EAA2B9G,SAA3B,EAAsC+G,QAAtC,EAAgD6D,mBAAmB,IAAnE,EAAyE;AACvE,WAAOrH,uDAAQA,CAAE;;;QAGbqH,mBAAoB,WAAU5K,SAAU,IAAG,KAAKqH,SAAU,OAA1D,GAAmE,EAAG;WACnE,KAAKtH,CAAL,EAAQ8K,mBAAR,CAA4BF,OAA5B,CAAqC;;;;cAIlC,KAAKtD,SAAU;;;;;oCAKON,QAAS,IAAG,KAAKsB,aAAc;;;;;;;6BAOtC,KAAKhB,SAAU;;;;;;;;;;2CAWhC,KAAKA,SACN;iBACM,KAAKtH,CAAL,EAAQ+K,qBAAR,EAAgC;;;YAGrC,KAAK/K,CAAL,EAAQhB,WAAR,GAAsB,EAAtB,GAA4B;;;kCAGN+H,OAAQ,IAAG,KAAKwB,aAAc;;;;;;;kCAO9BxB,OAAQ;;;;;;WAM9B;;;;;gBAKI,CAAC,KAAK/G,CAAL,EAAQhB,WAAT,GAAuB,kDAAvB,GAA4E,EAAG;mBAC5E,KAAKwK,GAAI;;;;;;uBAML,KAAKlC,SAAU;KAhE3B,CAAP;AAkED;;AAED0D,yBAAuB;AACrB;AACA;AACA;;AAEA,UAAMP,SAAS,KAAKzK,CAAL,EAAQtC,MAAR,CACZxB,GADY,CACR,CAAC,EAAE6M,IAAF,EAAQC,IAAR,EAAD,KAAoB;AACvB,aAAOD,QAAQ,OAAR,IAAmBC,IAA1B;AACD,KAHY,EAIZpN,MAJY,CAIL2F,OAJK,CAAf;;AAMA,QAAI1B,MAAM,EAAV;;AAEA;AACA;AACA;;AAEAA,WAAO,MAAP;;AAEAA,WAAO4K,OACJvO,GADI,CACAwO,SAAS;AACZ,aAAOA,KAAP;AACD,KAHI,EAIJ5L,IAJI,CAIC,MAJD,CAAP;;AAMA,WAAOsD,qDAAMA,CAACvC,IAAIgD,IAAJ,EAAP,CAAP;AACD;;AAEDoI,2BAAyB;AACvB,WAAO,KAAKjL,CAAL,EAAQqJ,OAAR,CACJnN,GADI,CACAgP,UAAU;AACb,aAAQ,IAAGA,MAAO,QAAlB;AACD,KAHI,EAIJpM,IAJI,CAIC,IAJD,CAAP;AAKD;;AAEDqM,uBAAqBP,OAArB,EAA8B;AAC5B,QAAI,CAACA,OAAL,EAAc;AACZA,gBAAU,GAAV;AACD;AACD,UAAMQ,WAAW,EAAjB;;AAEA,UAAMC,UAAU,KAAKrL,CAAL,EAAQwG,QAAR,CAAiBtK,GAAjB,CAAqBwK,SAAS;AAC5C,UAAI,CAAC0E,SAASnP,QAAT,CAAkByK,MAAMY,SAAxB,CAAL,EAAyC;AACvC8D,iBAAS7P,IAAT,CAAcmL,MAAMY,SAApB;AACA,eAAQ,UAASZ,MAAMY,SAAU,UAASsD,OAAQ,IAAGlE,MAAMY,SAAU,GAArE;AACD;AACF,KALe,EAKb1L,MALa,CAKN0P,OAAO,CAAC,CAACA,GAAF,IAASA,IAAItP,MALd,CAAhB;;AAOA;AACAqP,YAAQ9P,IAAR,CAAa,EAAb;;AAEA,WAAO8P,QAAQvM,IAAR,CAAa,IAAb,CAAP;AACD;;AAEDyM,gCAA8B;AAC5B,WAAO,KAAKvL,CAAL,EAAQ6I,OAAR,CACJ3M,GADI,CACAuH,UAAU;AACb,UAAIA,OAAOsF,IAAP,IAAe,KAAnB,EAA0B;AACxB,eAAQ,UAAStF,OAAOuF,IAAK,+BAA7B;AACD;;AAED,YAAMwC,WAAWC,gDAAMA,CAACC,MAAP,CAAcjI,OAAOuF,IAArB,EAA2B2C,IAA5C;AACA;AACA,YAAMA,OAAOH,YAAY/H,OAAOuF,IAAhC;;AAEA,aAAQ,oBAAmB5G,qDAAMA,CAACuJ,IAAP,CAAa,KAAxC;AACD,KAXI,EAYJ7M,IAZI,CAYC,IAZD,CAAP;AAaD;;AAED8M,+BAA6B;AAC3B,QAAI,CAAC,KAAK5L,CAAL,EAAQ6I,OAAb,EAAsB,OAAO,EAAP;;AAEtB,UAAMgD,SAASlI,wDAASA,CAAC,oBAAV,EAAgC,QAAhC,EAA0C;AACvDF,cAAQ;AAD+C,KAA1C,CAAf;;AAIA,WAAOX,uDAAQA,CAAE;;;eAGN+I,MAAO;;;;;KAHX,CAAP;AASD;AAtlB6B,C;;;AAylBhC,SAAShC,QAAT,CAAkB9G,IAAlB,EAAwB;AACtB,SAAOA,KAAKjC,OAAL,CAAa,qBAAb,EAAoC,UAASgL,MAAT,EAAiBtE,KAAjB,EAAwB;AACjE,WAAOA,SAAS,CAAT,GAAasE,OAAOvE,WAAP,EAAb,GAAoCuE,OAAO3H,WAAP,EAA3C;AACD,GAFM,EAEJrD,OAFI,CAEI,MAFJ,EAEY,EAFZ,CAAP;AAGD;;AAED,SAASiJ,OAAT,CAAiBP,GAAjB,EAAsBhD,WAAW,EAAjC,EAAqC;AACnCA,WAAStB,OAAT,CAAiBwB,SAAS;AACxB8C,UAAMA,IAAI1I,OAAJ,CACJ,IAAI6I,MAAJ,CAAY,MAAKjD,MAAM8B,MAAO,EAA9B,EAAiC,GAAjC,CADI,EAEH,GAAE9B,MAAMY,SAAU,aAFf,CAAN;AAID,GALD;;AAOA;AACE;AACF,SACEkC;AACE;AADF,GAEG1I,OAFH,CAGI,4DAHJ,EAII,CAAC0B,KAAD,EAAQiG,EAAR,EAAYsD,IAAZ,EAAkBC,KAAlB,EAAyBxF,QAAzB;AACE;AACA,6BAA2B5D,IAA3B,CAAgC4D,QAAhC,IACK,iBAAgBuF,IAAK,iBAAgBtD,EAAG,IAAGqB,WAC1CkC,KAD0C,CAE1C,4DAA2DjC,QAC3DvD,QAD2D,CAE3D,wBAAuBiC,EAAG,KALhC,GAMK,iBAAgBsD,IAAK,iBAAgBtD,EAAG,IAAGqB,WAC1CkC,KAD0C,CAE1C,uDAAsDxF,QAAS,uBAAsBiC,EAAG,KAdpG;AAgBE;AAhBF,GAiBG3H,OAjBH,CAkBI,wCAlBJ,EAmBI,CAAC0B,KAAD,EAAQiG,EAAR,EAAYsD,IAAZ,EAAkBC,KAAlB,KACG,iBAAgBD,IAAK,iBAAgBtD,EAAG,IAAGqB,WAC1CkC,KAD0C,CAE1C,sBAAqBvD,EAAG,KAtBhC,CADF;AA0BD;;AAED;AACA,SAASqB,UAAT,CAAoBkC,KAApB,EAA2B;AACzBA,UAAQA,MAAMnJ,IAAN,EAAR;;AAEA,MAAI,CAACmJ,KAAL,EAAY;AACV,WAAO,YAAP;AACD;;AAED,MAAI1E,YAAY0E,MAAMxJ,KAAN,CAAY,qBAAZ,CAAhB;;AAEA,MAAI,CAAC8E,SAAL,EAAgB;AACd,WAAQ,GAAE0E,KAAM,aAAhB;AACD;;AAED1E,cAAYA,UAAU,CAAV,CAAZ;AACA0E,UAAQA,MAAMlL,OAAN,CAAc,qBAAd,EAAqC,EAArC,CAAR;;AAEA,SAAQ,GAAEkL,KAAM,gCAA+B1E,SAAU,gCAAlD,CAAkFzE,IAAlF,EAAP;AACD;;AAEc1F,yEAAf,E;;;;;;AC1sBA,sC;;;;;;ACAA,qC;;;;;;ACAA,sC;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEA,MAAM+D,UAAU+K,YAAYpQ,2CAAIA,CAACqF,OAAL,CAAagL,SAAb,EAAwB,YAAxB,EAAsCD,QAAtC,CAA5B;;AAEA;AACe;AACb,MAAIlE,WAAJ,GAAkB;AAChB,WAAOrC,0DAAWA,CAACxE,QAAQ,gBAAR,CAAZ,CAAP;AACD;AAHY,CAAf,E;;;;;;;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;;AAEA;;AAUA,MAAMlB,IAAImG,OAAO,eAAP,CAAV;;IAGM5J,Y,WADLmI,uDAAQA,CAAC1E,CAAT,C,gBACD,MAAMzD,YAAN,SAA2B0J,+CAA3B,CAAkC;AAChC,MAAI4C,OAAJ,GAAc;AACZ,WAAO,KAAK7I,CAAL,EAAQ6I,OAAR,CAAgBhK,KAAhB,EAAP;AACD;;AAED,MAAIpC,QAAJ,GAAe;AACb,WAAO,KAAKuD,CAAL,EAAQvD,QAAf;AACD;;AAED,MAAIA,QAAJ,CAAaA,QAAb,EAAuB;AACrB,WAAO,KAAKuD,CAAL,EAAQvD,QAAR,GAAmB,CAAC,CAACA,QAA5B;AACD;;AAED,MAAID,OAAJ,GAAc;AACZ,WAAO,KAAKwD,CAAL,EAAQxD,OAAf;AACD;;AAED,MAAIA,OAAJ,CAAYA,OAAZ,EAAqB;AACnB,SAAKwD,CAAL,EAAQxD,OAAR,GAAkBgI,OAAOhI,OAAP,CAAlB;AACD;;AAEDwN,cAAYC,UAAU,EAAtB,EAA0B;AACxB;;AAEA,SAAKjK,CAAL,EAAQ6I,OAAR,GAAkB,EAAlB;;AAEA,SAAKrM,OAAL,GAAeyN,QAAQzN,OAAvB;AACA,SAAKC,QAAL,GAAgBwN,QAAQxN,QAAxB;AACD;;AAEKoB,OAAN,CAAYgJ,GAAZ,EAAiBoD,OAAjB,EAA0B;AAAA;;AAAA;AACxB,YAAMhI,oDAAMA,CAAC4E,GAAP,CAAN;;AAEAoD,6BACKA,OADL;AAEExN,kBAAU,MAAKA;AAFjB;;AAKA,YAAMwK,gBAAiB,GAAEJ,GAAI,WAA7B;AACA,YAAMO,iBAAiB,CAACH,aAAD,CAAvB;;AAEA,UAAI,CAACgD,QAAQxN,QAAb,EAAuB;AACrB,cAAMzB,wCAAEA,CAAC+E,SAAH,CAAakH,aAAb,EAA4B,MAAKjH,CAAL,EAAQmM,mBAAR,EAA5B,CAAN;AACA,eAAO/E,cAAP;AACD;;AAED,YAAMgF,kBAAkB,MAAKvD,OAAL,CAAa3M,GAAb,CAAiB,UAACuH,MAAD,EAAS+D,KAAT,EAAgB,EAAExL,MAAF,EAAhB,EAA+B;AACtE,cAAMqQ,WAAW/H,sDAAOA,CAACkD,KAAR,EAAexL,SAAS,EAAT,GAAc,CAA7B,EAAgC,CAAhC,IAAqC,KAAtD;AACA,cAAM4D,WAAY,GAAEiH,GAAI,IAAGwF,QAAS,EAApC;AACAjF,uBAAe7L,IAAf,CAAoBqE,QAApB;;AAEA,eAAOyM,QAAP;AACD,OANuB,CAAxB;;AAQA,YAAMC,kBAAkB,MAAKzD,OAAL,CAAa3M,GAAb;AAAA,qCAAiB,WAAOuH,MAAP,EAAe+D,KAAf,EAAyB;AAChE,gBAAM+E,iBAAiBH,gBAAgB5E,KAAhB,CAAvB;;AAEA,cAAImE,OAAOlI,OAAOsF,IAAP,IAAe,MAAf,GACPtF,OAAOuF,IADA,GAEP,QAAQpG,IAAR,CAAaa,OAAOuF,IAApB,IACA,MAAMwD,iDAAKA,CAAC/I,OAAOuF,IAAb,EACL7N,IADK,CACA;AAAA,mBAAOyG,IAAImB,IAAJ,EAAP;AAAA,WADA,EAEL5H,IAFK,CAEA;AAAA,mBAAQsQ,gDAAMA,CAACC,MAAP,CAAc3I,IAAd,EAAoB4I,IAA5B;AAAA,WAFA,CADN,GAIAjG,0DAAWA,CAAE,GAAE,MAAKlJ,OAAQ,IAAGiH,OAAOuF,IAAK,EAA3C,CANJ;AAOA2C,iBAAOA,KAAK7K,OAAL,CAAa,kCAAb,EAAiD,EAAjD,CAAP;AACA6K,iBAAOjI,0DAAWA,CAACiI,IAAZ,CAAP;;AAEA,iBAAO3Q,wCAAEA,CAAC+E,SAAH,CAAc,GAAE8G,GAAI,IAAG0F,cAAe,EAAtC,EAAyCZ,IAAzC,CAAP;AACD,SAduB;;AAAA;AAAA;AAAA;AAAA,WAAxB;;AAgBA,YAAMc,sBAAsBL,gBAAgBlQ,GAAhB,CAAoB,UAACqQ,cAAD,EAAoB;AAClE,eAAQ,aAAYA,cAAe,GAAnC;AACD,OAF2B,EAEzBzN,IAFyB,CAEpB,IAFoB,CAA5B;;AAIA,YAAM8I,eAAe5M,wCAAEA,CAAC+E,SAAH,CACnBkH,aADmB,EAEnBzD,uDAAQA,CAACiJ,mBAAT,CAFmB,CAArB;;AAKA,YAAM3R,QAAQC,GAAR,CAAY,CAChB,GAAGuR,eADa,EAEhB1E,YAFgB,CAAZ,CAAN;;AAKA,aAAOR,cAAP;AAtDwB;AAuDzB;;AAEDsF,YAAUpP,GAAV,EAAe4F,OAAf,EAAwB;AACtB,QAAI6F,IAAJ;AACA,QAAIC,IAAJ;;AAEA,QAAI1L,GAAJ,EAAS;AACPyL,aAAO,KAAP;AACAC,aAAO,YAAYpG,IAAZ,CAAiBtF,GAAjB,IAAwBA,GAAxB,GAA8BzB,2CAAIA,CAACqF,OAAL,CAAa,GAAb,EAAkB5D,GAAlB,CAArC;AACD,KAHD,MAIK;AACHyL,aAAO,MAAP;AACAC,aAAOyC,gDAAMA,CAACC,MAAP,CAAcxI,OAAd,EAAuByI,IAA9B;AACD;;AAED,UAAMpB,SAAS,KAAKvK,CAAL,EAAQ6I,OAAR,CAAgB2B,IAAhB,CAAsB/G,MAAD,IAAY;AAC9C,aAAOA,OAAOuF,IAAP,IAAeA,IAAtB;AACD,KAFc,CAAf;;AAIA,QAAI,CAACuB,MAAL,EAAa;AACX,WAAKvK,CAAL,EAAQ6I,OAAR,CAAgBtN,IAAhB,CAAqB,EAAEwN,IAAF,EAAQC,IAAR,EAArB;AACD;AACF;;AAED2D,yBAAuB;AACrB,UAAM9D,UAAU,KAAK7I,CAAL,EAAQ6I,OAAR,CAAgB3M,GAAhB,CAAqBuH,MAAD,IAAY;AAC9C,aAAOX,uDAAQA,CAAE;;mBAEJW,OAAOsF,IAAK;mBACZ3G,qDAAMA,CAACqB,OAAOuF,IAAd,EAAoB,GAApB,CAAyB;;OAH/B,CAAP;AAMD,KAPe,EAOblK,IAPa,CAOR,IAPQ,CAAhB;;AASA,WAAO0E,uDAAQA,CAAE;;aAERqF,OAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAFV,CAAP;AA+BD;AAtJ+B,C;;;AAyJnBtM,2EAAf,E;;;;;;AC5KA,uC;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AASA,MAAMyD,IAAImG,OAAO,cAAP,CAAV;AACA,MAAMyG,WAAW,IAAIC,gDAAJ,CAAa;AAC5BC,YAAU;AADkB,CAAb,CAAjB;;IAKMnQ,W,WADL+H,uDAAQA,CAAC1E,CAAT,C,gBACD,MAAMrD,WAAN,SAA0BsJ,+CAA1B,CAAiC;AAC/B,MAAIvI,MAAJ,GAAa;AACX,WAAO,KAAKsC,CAAL,EAAQtC,MAAR,CAAemB,KAAf,EAAP;AACD;;AAED,MAAIpC,QAAJ,GAAe;AACb,WAAO,KAAKuD,CAAL,EAAQvD,QAAf;AACD;;AAED,MAAIA,QAAJ,CAAaA,QAAb,EAAuB;AACrB,WAAO,KAAKuD,CAAL,EAAQvD,QAAR,GAAmB,CAAC,CAACA,QAA5B;AACD;;AAED,MAAID,OAAJ,GAAc;AACZ,WAAO,KAAKwD,CAAL,EAAQxD,OAAf;AACD;;AAED,MAAIA,OAAJ,CAAYA,OAAZ,EAAqB;AACnB,SAAKwD,CAAL,EAAQxD,OAAR,GAAkBgI,OAAOhI,OAAP,CAAlB;AACD;;AAED,MAAII,MAAJ,GAAa;AACX,WAAO,KAAKoD,CAAL,EAAQpD,MAAf;AACD;;AAED,MAAIA,MAAJ,CAAWA,MAAX,EAAmB;AACjB,SAAKoD,CAAL,EAAQpD,MAAR,GAAiB4H,OAAO5H,MAAP,CAAjB;AACD;;AAEDoN,cAAYC,UAAU,EAAtB,EAA0B;AACxB;;AAEA,SAAKjK,CAAL,EAAQtC,MAAR,GAAiB,EAAjB;;AAEA,SAAKlB,OAAL,GAAeyN,QAAQzN,OAAvB;AACA,SAAKC,QAAL,GAAgBwN,QAAQxN,QAAxB;AACA,SAAKG,MAAL,GAAcqN,QAAQpN,MAAtB;AACD;;AAEKgB,OAAN,CAAYgJ,GAAZ,EAAiBoD,OAAjB,EAA0B;AAAA;;AAAA;AACxB,YAAMhI,oDAAMA,CAAC4E,GAAP,CAAN;;AAEAoD,6BACKA,OADL;AAEExN,kBAAU,MAAKA;AAFjB;;AAKA,YAAMwK,gBAAiB,GAAEJ,GAAI,WAA7B;AACA,YAAMO,iBAAiB,CAACH,aAAD,CAAvB;;AAEA,UAAI,CAACgD,QAAQxN,QAAb,EAAuB;AACrB,cAAMzB,wCAAEA,CAAC+E,SAAH,CAAakH,aAAb,EAA4B,MAAKjH,CAAL,EAAQ+M,kBAAR,EAA5B,CAAN;AACA,eAAO3F,cAAP;AACD;;AAED,YAAM4F,iBAAiB,MAAKtP,MAAL,CAAYxB,GAAZ,CAAgB,UAACoE,KAAD,EAAQkH,KAAR,EAAe,EAAExL,MAAF,EAAf,EAA8B;AACnE,cAAMqQ,WAAW/H,sDAAOA,CAACkD,KAAR,EAAexL,SAAS,EAAT,GAAc,CAA7B,EAAgC,CAAhC,IAAqC,MAAtD;AACA,cAAM4D,WAAY,GAAEiH,GAAI,IAAGwF,QAAS,EAApC;AACAjF,uBAAe7L,IAAf,CAAoBqE,QAApB;;AAEA,eAAOyM,QAAP;AACD,OANsB,CAAvB;;AAQA,YAAMY,iBAAiB,MAAKvP,MAAL,CAAYxB,GAAZ;AAAA,qCAAgB,WAAOoE,KAAP,EAAckH,KAAd,EAAwB;AAC7D,gBAAM0F,gBAAgBF,eAAexF,KAAf,CAAtB;;AAEA,gBAAMkD,QAAQpK,MAAMyI,IAAN,IAAc,OAAd,GACVzI,MAAM0I,IADI,GAEV,QAAQpG,IAAR,CAAatC,MAAM0I,IAAnB,IACA,MAAMwD,iDAAKA,CAAClM,MAAM0I,IAAZ,EAAkB7N,IAAlB,CAAuB;AAAA,mBAAOyG,IAAImB,IAAJ,EAAP;AAAA,WAAvB,CADN,GAEA,MAAM2C,kDAAWA,CAACI,OAAZ,CAAqB,GAAE,MAAKtJ,OAAQ,IAAG8D,MAAM0I,IAAK,EAAlD,CAJV;;AAMA,iBAAOhO,wCAAEA,CAAC+E,SAAH,CAAc,GAAE8G,GAAI,IAAGqG,aAAc,EAArC,EAAwC,MAAKlN,CAAL,EAAQmN,cAAR,CAAuBzC,KAAvB,CAAxC,CAAP;AACD,SAVsB;;AAAA;AAAA;AAAA;AAAA,WAAvB;;AAYA,YAAM0C,qBAAqBJ,eAAe9Q,GAAf,CAAmB,UAACgR,aAAD,EAAmB;AAC/D,eAAQ,aAAYA,aAAc,GAAlC;AACD,OAF0B,EAExBpO,IAFwB,CAEnB,IAFmB,CAA3B;;AAIA,YAAM8I,eAAe5M,wCAAEA,CAAC+E,SAAH,CACnBkH,aADmB,EAEnBzD,uDAAQA,CAAC4J,kBAAT,CAFmB,CAArB;;AAKA,YAAMtS,QAAQC,GAAR,CAAY,CAChB,GAAGkS,cADa,EAEhBrF,YAFgB,CAAZ,CAAN;;AAKA,aAAOR,cAAP;AAlDwB;AAmDzB;;AAED5G,WAAS8J,IAAT,EAAepH,OAAf,EAAwB;AACtB,QAAI6F,IAAJ;AACA,QAAIC,IAAJ;;AAEA,QAAIsB,IAAJ,EAAU;AACRvB,aAAO,MAAP;AACAC,aAAO,YAAYpG,IAAZ,CAAiB0H,IAAjB,IAAyBA,IAAzB,GAAgCzO,2CAAIA,CAACqF,OAAL,CAAa,GAAb,EAAkBoJ,IAAlB,CAAvC;AACD,KAHD,MAIK;AACHvB,aAAO,OAAP;AACAC,aAAO9F,OAAP;AACD;;AAED,UAAMqH,SAAS,KAAKvK,CAAL,EAAQtC,MAAR,CAAe8M,IAAf,CAAqBlK,KAAD,IAAW;AAC5C,aAAOA,MAAM0I,IAAN,IAAcA,IAArB;AACD,KAFc,CAAf;;AAIA,QAAI,CAACuB,MAAL,EAAa;AACX,WAAKvK,CAAL,EAAQtC,MAAR,CAAenC,IAAf,CAAoB,EAAEwN,IAAF,EAAQC,IAAR,EAApB;AACD;AACF;;AAEDqE,wBAAsB;AACpB,SAAKrN,CAAL,EAAQtC,MAAR,CAAewH,OAAf,CAAwB5E,KAAD,IAAW;AAChC,UAAIA,MAAMyI,IAAN,IAAc,OAAlB,EAA2B;AACzBzI,cAAM0I,IAAN,GAAa,KAAKhJ,CAAL,EAAQmN,cAAR,CAAuB7M,MAAM0I,IAA7B,CAAb;AACD;AACF,KAJD;;AAMA,UAAMtL,SAAS,KAAKsC,CAAL,EAAQtC,MAAR,CAAexB,GAAf,CAAoBoE,KAAD,IAAW;AAC3C,aAAOwC,uDAAQA,CAAE;;mBAEJxC,MAAMyI,IAAK;mBACX3G,qDAAMA,CAAC9B,MAAM0I,IAAb,EAAmB,GAAnB,CAAwB;;OAH9B,CAAP;AAMD,KAPc,EAOZlK,IAPY,CAOP,IAPO,CAAf;;AASA,WAAO0E,uDAAQA,CAAE;;aAER9F,MAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qBA+CC,KAAKsC,CAAL,EAAQsN,yBAAR,EAAoC;;;;;KAjD9C,CAAP;AAuDD;;AAEDC,+BAA6B;AAC3B,YAAQ,KAAK3Q,MAAb;AACE,WAAK,SAAL;AACE,eAAOkG,uDAAQA,CAAE;;SAAV,CAAP;AAGF,WAAK,QAAL;AACE,eAAOA,uDAAQA,CAAE;;;SAAV,CAAP;AAIF;AACE,eAAOA,uDAAQA,CAAE;;;;SAAV,CAAP;AAXJ;AAiBD;;AAED;AACA0K,kBAAgB9C,KAAhB,EAAuB;AACrBA,YAAQ5K,6DAAcA,CAAC4K,KAAf,EAAsB,KAAK9N,MAA3B,CAAR;AACA8N,YAAQkC,SAASlB,MAAT,CAAgBhB,KAAhB,EAAuBhN,MAA/B;;AAEA;AACA,WAAOgN,MAAM5J,OAAN,CAAc,iBAAd,EAAiC,CAAC0B,KAAD,EAAQiL,GAAR,KAAgB;AACtD,UAAI,aAAa7K,IAAb,CAAkB6K,GAAlB,CAAJ,EAA4B,OAAOjL,KAAP;;AAE5BiL,YAAM5R,2CAAIA,CAACqF,OAAL,CAAa,GAAb,EAAkBuM,GAAlB,CAAN;AACA,aAAQ,OAAMA,GAAI,GAAlB;AACD,KALM,CAAP;AAMD;AA3N8B,C;;;AA8NlB9Q,0EAAf,E;;;;;;ACpPA,sC","file":"appfairy.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import cheerio from \"cheerio\";\nimport path from \"path\";\nimport git from \"./git\";\nimport { fs, ncp, reread } from \"./libs\";\nimport { encapsulateCSS } from \"./utils\";\nimport { ViewWriter, ScriptWriter, StyleWriter } from \"./writers\";\n\nconst defaultPublicSubFolders = [\"css\", \"fonts\", \"images\", \"js\"];\n\nexport const transpile = async config => {\n  let inputFiles;\n  let outputFiles = [];\n  try {\n    await Promise.all([\n      fs.readdir(config.input).then(files => {\n        inputFiles = files;\n      }),\n      git.removeAppfairyFiles(config).then(files => {\n        outputFiles.push(...files);\n      })\n    ]);\n  } catch (e) {\n    console.log(e);\n  }\n\n  const folders = inputFiles.filter(\n    file =>\n      !path.extname(file).length && !defaultPublicSubFolders.includes(file)\n  );\n  try {\n    await Promise.all(\n      folders.map(folder =>\n        fs.readdir(`${config.input}/${folder}`).then(files => {\n          inputFiles = [\n            ...(inputFiles || []),\n            ...(files || []).map(file => `${folder}/${file}`)\n          ];\n        })\n      )\n    );\n  } catch (e) {\n    console.log(e);\n  }\n  const htmlFiles = inputFiles.filter(file => path.extname(file) == \".html\");\n\n  const publicSubDirs = inputFiles.filter(\n    file => !path.extname(file) && defaultPublicSubFolders.includes(file)\n  );\n\n  const scriptWriter = new ScriptWriter({\n    baseUrl: config.input,\n    prefetch: config.prefetch\n  });\n\n  const styleWriter = new StyleWriter({\n    baseUrl: config.input,\n    prefetch: config.prefetch,\n    source: config.srouce\n  });\n\n  const transpilingHTMLFiles = htmlFiles.map(htmlFile => {\n    return transpileHTMLFile(config, htmlFile, scriptWriter, styleWriter);\n  });\n  const viewWriters = await Promise.all(transpilingHTMLFiles);\n  const writingFiles = Promise.all([\n    ViewWriter.writeAll(\n      viewWriters,\n      config.output.src.views,\n      config.output.src.components,\n      config.output.src.meta,\n      config.output.src.styles,\n      config.output.src.controllers\n    ).then(paths => outputFiles.push(...paths)),\n    // scriptWriter.write(\n    //   config.output.src.scripts\n    // ).then((paths) => outputFiles.push(...paths)),\n    styleWriter\n      .write(config.output.src.styles)\n      .then(paths => outputFiles.push(...paths))\n  ]);\n\n  const makingPublicDir = makePublicDir(config, publicSubDirs).then(paths =>\n    outputFiles.push(...paths)\n  );\n  try {\n    await Promise.all([writingFiles, makingPublicDir]);\n  } catch (e) {\n    console.log(e);\n  }\n\n  return git.add(outputFiles, config).then(files => {\n    return git.commit(files, \"Update design\");\n  });\n};\n\nconst transpileHTMLFile = async (\n  config,\n  htmlFile,\n  scriptWriter,\n  styleWriter\n) => {\n  const html = (await fs.readFile(`${config.input}/${htmlFile}`)).toString();\n  const $ = cheerio.load(html);\n  const $head = $(\"head\");\n  if (!!scriptWriter && !!styleWriter) {\n    // pass\n  }\n  const $body = $(\"body\");\n  const viewWriter = new ViewWriter({\n    name: htmlFile\n      .split('/')[htmlFile.split('/').length-1]\n      .split(\".\")\n      .slice(0, -1)\n      .join(\".\"),\n    baseUrl: config.baseUrl,\n    parent: htmlFile.split('/')[0] === htmlFile ? null : htmlFile.split('/')[0],\n    isComponent: false,\n    source: config.source\n  });\n\n\n  // setScripts(scriptWriter, $head, $)\n\n  setStyles(viewWriter, styleWriter, $head, $, config.output.src.styles);\n  setHTML(viewWriter, $body, $);\n\n  return viewWriter;\n};\n\nconst makePublicDir = async (config, publicSubDirs) => {\n  const publicDir = config.output.public;\n  await Promise.all(\n    publicSubDirs.map(publicSubDir => {\n      return ncp(\n        `${config.input}/${publicSubDir}`,\n        `${publicDir}/${publicSubDir}`\n      );\n    })\n  );\n\n  // Resolving relative paths\n  const filePaths = await reread(config.input);\n\n  const relativePaths = filePaths.map(filePath => {\n    const relativePath = path.relative(config.input, filePath);\n\n    return `${publicDir}/${relativePath}`;\n  });\n\n  // Encapsulate CSS files\n  await Promise.all(\n    relativePaths.map(async relativePath => {\n      if (path.extname(relativePath) != \".css\") return;\n\n      let css = (await fs.readFile(relativePath)).toString();\n      if (relativePath.split('/')[relativePath.split('/').length-1] !== 'normalize.css') {\n        css = encapsulateCSS(css, config.source);\n      }\n      await fs.writeFile(relativePath, css);\n    })\n  );\n\n  return relativePaths;\n};\n\n// const setScripts = (scriptWriter, $head) => {\n//   const $scripts = $head.find('script[type=\"text/javascript\"]')\n\n//   $scripts.each((i, script) => {\n//     const $script = $head.find(script)\n\n//     scriptWriter.setScript($script.attr('src'), $script.html())\n//   })\n// }\n\nconst setStyles = (viewWriter, styleWriter, $head, _, stylesDir) => {\n  let $styles;\n\n  $styles = $head.find('link[rel=\"stylesheet\"][type=\"text/css\"]');\n\n  $styles.each((i, style) => {\n    const $style = $head.find(style);\n\n    viewWriter.setStyle($style.attr(\"href\"), $style.html(), stylesDir);\n    styleWriter.setStyle($style.attr(\"href\"), $style.html());\n  });\n\n  $styles = $head.find(\"style\");\n\n  $styles.each((i, style) => {\n    const $style = $head.find(style);\n\n    viewWriter.setStyle($style.attr(\"href\"), $style.html(), stylesDir);\n    styleWriter.setStyle($style.attr(\"href\"), $style.html());\n  });\n};\n\nconst setHTML = (viewWriter, $body, $) => {\n  // Create a wrap around $body so we can inherit its style without actually\n  // using a <body> tag\n  const $div = $(\"<div>\");\n  $div.html($body.html());\n  $div.attr($body.attr());\n  viewWriter.html = $.html($div);\n};\n","module.exports = require(\"cheerio\");","module.exports = require(\"path\");","import execa from \"execa\";\nimport path from \"path\";\nimport rimraf from \"rimraf\";\n// import { fs } from \"./libs\";\n\n// attempt at supporting windows by monkey patching path.relative\n// to prevent backslashes\nconst orPathRel = path.relative;\npath.relative = (from, to) =>\n  orPathRel(from, to).replace(/\\\\/gi, '/')\n\n\n// Will add given files and will ignore those who aren't exist\nexport const add = async (files, config) => {\n  const { stdout: root } = await execa(\"git\", [\"rev-parse\", \"--show-toplevel\"]);\n\n  files = files.map(file => path.resolve(root, file));\n\n  let unstaged = await Promise.all([\n    execa(\"git\", [\"diff\", \"--name-only\"]),\n    execa(\"git\", [\"ls-files\", \"--others\", \"--exclude-standard\"])\n  ]).then(results => {\n    return results.reduce((unstaged, { stdout }) => {\n      return unstaged.concat(stdout.split(\"\\n\").filter(Boolean));\n    }, []);\n  });\n\n  unstaged = unstaged.map(file => path.resolve(root, file));\n  files = files.filter(file => unstaged.includes(file));\n  await execa(\"git\", [\n    \"add\",\n    ...files,\n    `${config.output.src.root}/routes.js`,\n    config.output.src.views,\n    config.output.src.components,\n    config.output.src.styles,\n    // config.output.server,\n    config.output.public,\n  ]);\n\n  return [\n    ...files,\n    `${config.output.src.root}/routes.js`,\n    config.output.src.views,\n    config.output.src.components,\n    config.output.src.styles,\n    // config.output.server,\n    config.output.public,\n  ];\n};\n\n// Will commit changes, and if files not exist, will print status\nexport const commit = (files, message, stdio = \"inherit\") => {\n  if (files && files.length)\n    try {\n      return execa(\"git\", [\"commit\", \"-m\", `update: ${message}`, '--allow-empty'], {\n        stdio\n      });\n    } catch (e) {\n      // Probably no changes were made\n    }\n\n  return execa(\"git\", [\"status\"], {\n    stdio\n  });\n};\n\nexport const removeAppfairyFiles = async (config) => {\n  const { stdout: diffFiles } = await execa(\"git\", [\"diff\", \"--name-only\"]);\n\n  if (diffFiles) {\n    // throw Error(\n    //   [\n    //     \"Cannot transpile: Your index contains uncommitted changes.\",\n    //     \"Please commit or stash them.\"\n    //   ].join(\"\\n\")\n    // );\n    console.log(['=========', 'Warning: You have uncommitted changes!', '========='].join('\\n'))\n  }\n\n  // let { stderr, stdout: hash } = await execa(\"git\", [\n  //   \"log\",\n  //   \"-1\",\n  //   \"--format=%H\",\n  //   `--grep=appfairy: Update design`\n  // ]);\n\n  // // Probably git is not initialized\n  // if (stderr) throw Error(stderr);\n  // // No previous migrations found\n  // if (!hash) return [];\n\n  // List all files but deleted ones\n  // let { stdout: files } = await execa(\"git\", [\n  //   \"diff\",\n  //   \"--name-only\",\n  //   \"--diff-filter=ACMRTUXB\",\n  //   `${hash}~1`,\n  //   hash\n  // ]);\n  // files = files.split(\"\\n\").filter(Boolean);\n  // console.log(files)\n\n  // const { stdout: root } = await execa(\"git\", [\"rev-parse\", \"--show-toplevel\"]);\n\n  await Promise.all([\n    // ...files.map(async file => {\n    //   return fs.unlink(`${root}/${file}`);\n    // }),\n    new Promise(res => rimraf(`${config.output.src.root}/routes.js`, () => res())),\n    // new Promise(res => rimraf(config.output.server, () => res())),\n    new Promise(res => rimraf(config.output.src.views, () => res())),\n    new Promise(res => rimraf(config.output.src.components, () => res())),\n    new Promise(res => rimraf(config.output.src.styles, () => res())),\n  ]);\n\n  // return [...files||[]];\n  return [\n    `${config.output.src.root}/routes.js`,\n    config.output.src.views,\n    config.output.src.components,\n    config.output.src.styles,\n    // config.output.server,\n    config.output.public,\n  ];\n};\n\nexport default {\n  add,\n  commit,\n  removeAppfairyFiles\n};\n","module.exports = require(\"execa\");","module.exports = require(\"rimraf\");","export { default as fs } from './fs'\nexport { default as mkdirp } from './mkdirp'\nexport { default as ncp } from './ncp'\nexport { default as reread } from './reread'\nexport { default as rimraf } from './rimraf'\n","import fs from 'fs'\nimport { promisify } from 'util'\n\nexport const mkdir = promisify(fs.mkdir)\nexport const readdir = promisify(fs.readdir)\nexport const readFile = promisify(fs.readFile)\nexport const stat = promisify(fs.stat)\nexport const unlink = promisify(fs.unlink)\nexport const writeFile = promisify(fs.writeFile)\n\nexport default {\n  mkdir,\n  readdir,\n  readFile,\n  stat,\n  unlink,\n  writeFile,\n}\n","module.exports = require(\"fs\");","module.exports = require(\"util\");","import fs from 'fs-extra'\nimport { promisify } from 'util'\n\nexport default promisify(fs.mkdirp)\n","module.exports = require(\"fs-extra\");","import fs from 'fs-extra'\nimport { promisify } from 'util'\n\nexport default promisify(fs.copy)\n","import reread from 'recursive-readdir'\nimport { promisify } from 'util'\n\nexport default promisify(reread)\n","module.exports = require(\"recursive-readdir\");","import fs from 'fs-extra'\nimport { promisify } from 'util'\n\nexport default promisify(fs.remove)\n","export { default as Internal } from './internal'\nexport { default as requireText } from './requireText'\n\n// Useful for nested strings that should be evaluated\nexport const escape = (str, quote) => {\n  str = str.replace(/\\\\/g, '\\\\\\\\')\n\n  switch (quote) {\n    case \"'\": return str.replace(/'/g, \"\\\\'\")\n    case '\"': return str.replace(/\"/g, '\\\\\"')\n    case '`': return str.replace(/`/g, '\\\\`')\n    default: return str\n      .replace(/'/g, \"\\\\'\")\n      .replace(/\"/g, '\\\\\"')\n      .replace(/`/g, '\\\\`')\n  }\n}\n\nexport const importantizeCSS = (css) => {\n  return css.replace(/(!important)?;/gi, ' !important;');\n}\n\n// Encapsulates all rules under .af-view\nexport const encapsulateCSS = (css, source) => {\n  return css.replace(\n    /((?:^|\\{|\\}|;)\\s*(?:\\/\\*[^]*?\\*\\/\\s*)*)([^@{}]+?)(\\s*\\{)/g, (\n    match, left, rule, right\n  ) => {\n\n    // Animation keyframe e.g. 50%\n    if (/^\\d/.test(rule)) return match\n    // Empty line skip, probably after a media query or so\n    if (!rule.trim()) return match\n\n    // Apply for all selectors in rule\n    // Note that <html /> and <body /> tags are replaced with .af-view\n    rule = rule\n      .replace(/\\.(af-class-)?([\\w_-]+)/g, '.af-class-$2')\n\n    rule = rule\n      .replace(/\\[class(.?)=\"( ?)([^\"]+)( ?)\"\\]/g, '[class$1=\"$2af-class-$3$4\"]')\n\n    rule = rule\n      .replace(/([^\\s][^,]*)(\\s*,?)/g, '.af-view $1$2')\n\n    rule = rule\n      .replace(/\\.af-view html/g, '.af-view')\n\n    rule = rule\n      .replace(/\\.af-view body/g, '.af-view')\n\n    rule = rule\n      .replace('.af-view .af-class-af-view', '')\n\n    switch (source) {\n      case 'webflow':\n        rule = rule\n          .replace(/af-class-w-/g, 'w-')\n        break\n      case 'sketch':\n        rule = rule\n          .replace(/af-class-anima-/g, 'anima-')\n          .replace(/af-class-([\\w_-]+)an-animation([\\w_-]+)/g, '$1an-animation$2')\n        break\n      default:\n        rule = rule\n          .replace(/af-class-w-/g, 'w-')\n          .replace(/af-class-anima-/g, 'anima-')\n          .replace(/af-class-([\\w_-]+)an-animation([\\w_-]+)/g, '$1an-animation$2')\n    }\n\n    return `${left}${rule}${right}`\n  })\n}\n\n// Will use the shortest indention as an axis\nexport const freeText = (text) => {\n  if (text instanceof Array) {\n    text = text.join('')\n  }\n\n  // This will allow inline text generation with external functions, same as ctrl+shift+c\n  // As long as we surround the inline text with ==>text<==\n  text = text.replace(\n    /( *)==>((?:.|\\n)*?)<==/g,\n    (match, baseIndent, content) =>\n  {\n    return content\n      .split('\\n')\n      .map(line => `${baseIndent}${line}`)\n      .join('\\n')\n  })\n\n  const lines = text.split('\\n')\n\n  const minIndent = lines.filter(line => line.trim()).reduce((minIndent, line) => {\n    const currIndent = line.match(/^ */)[0].length\n\n    return currIndent < minIndent ? currIndent : minIndent\n  }, Infinity)\n\n  return lines\n    .map(line => line.slice(minIndent))\n    .join('\\n')\n    .trim()\n    .replace(/\\n +\\n/g, '\\n\\n')\n}\n\n// Calls freeText() and disables lint\nexport const freeLint = (script) => {\n  return freeText(`\n    /* eslint-disable */\n\n    ==>${freeText(script)}<==\n\n    /* eslint-enable */\n  `)\n}\n\n// Calls freeLint() and ensures that 'this' is represented by window\nexport const freeContext = (script) => {\n  return freeLint(`\n    (function() {\n\n    ==>${freeText(script)}<==\n\n    }).call(window)\n  `)\n}\n\n// Creates a completely isolated scope with Function constructor.\n// args is a varToInject-injectedVarName map.\nexport const freeScope = (script, context = 'window', args = {}) => {\n  const callArgs = [context].concat(Object.keys(args))\n\n  return freeText(`\n    new Function(\\`\n      with (this) {\n        ${script}\n      }\n    \\`).call(${callArgs.join(', ')})\n  `)\n}\n\n// upper -> Upper\nexport const upperFirst = (str) => {\n  return str.substr(0, 1).toUpperCase() + str.substr(1)\n}\n\n// foo_barBaz -> ['foo', 'bar', 'Baz']\nexport const splitWords = (str) => {\n  return str\n    .replace(/[A-Z]/, ' $&')\n    .split(/[^a-zA-Z0-9]+/)\n    .filter(word => word.trim())\n}\n\n// abc 5 0 -> 00abc\nexport const padLeft = (str, length, char = ' ') => {\n  str = String(str)\n  length = parseInt(length + 1 - str.length)\n\n  return Array(length).join(char) + str\n}\n","const Internal = (_) => {\n  if (typeof _ != 'symbol') {\n    throw TypeError('Accessor must me a symbol')\n  }\n\n  return (Klass) => {\n    if (typeof Klass != 'function') {\n      throw TypeError('Provided target is not a class')\n    }\n\n    const internals = {}\n\n    Object.defineProperty(Klass.prototype, _, {\n      get() {\n        const _this = { ...internals }\n\n        Object.keys(_this).forEach((key) => {\n          const value = _this[key]\n\n          if (typeof value == 'function') {\n            _this[key] = value.bind(this)\n          }\n        })\n\n        Object.defineProperty(this, _, {\n          value: _this\n        })\n\n        return _this\n      }\n    })\n\n    Object.getOwnPropertyNames(Klass.prototype).forEach((key) => {\n      if (key[0] != '_') return\n\n      const { value } = Object.getOwnPropertyDescriptor(Klass.prototype, key)\n\n      if (typeof value != 'function') return\n\n      const publicKey = key.slice(1)\n      internals[publicKey] = value\n      delete Klass.prototype[key]\n    })\n  }\n}\n\nexport default Internal\n","import { readFile, readFileSync } from 'fs'\nimport resolvePath from 'resolve'\n\nconst cache = {}\n\nconst requireText = (path) => {\n  path = resolvePath.sync(path)\n\n  return cache[path] = cache[path] || readFileSync(path).toString()\n}\n\nrequireText.promise = (path) => new Promise((resolve, reject) => {\n  resolvePath(path, (err, path) => {\n    if (err) {\n      return reject(err)\n    }\n\n    let content = cache[path]\n\n    if (content) {\n      return resolve(content)\n    }\n\n    readFile(path, (err, content) => {\n      if (err) {\n        return reject(err)\n      }\n\n      cache[path] = content = content.toString()\n\n      resolve(content)\n    })\n  })\n})\n\nexport default requireText\n","module.exports = require(\"resolve\");","export { default as Writer } from './writer'\nexport { default as ViewWriter } from './view-writer'\nexport { default as ScriptWriter } from './script-writer'\nexport { default as StyleWriter } from './style-writer'\n","class Writer {\n  write() {\n    throw Error('Writer.write() must be implemented')\n  }\n}\n\nexport default Writer\n","import cheerio from \"cheerio\";\nimport HTMLtoJSX from \"htmltojsx\";\nimport path from \"path\";\nimport statuses from \"statuses\";\nimport uglify from \"uglify-js\";\n// import ServerIndex from '../static/server';\n// import ServerLoader from '../static/server/loader';\n// import ServerServer from '../static/server/server';\nimport { fs, mkdirp } from \"../libs\";\nimport raw from \"../raw\";\nimport Writer from \"./writer\";\n\nconst writingFiles = []\n\n// attempt at supporting windows by monkey patching path.relative\n// to prevent backslashes\nconst orPathRel = path.relative;\npath.relative = (from, to) =>\n  orPathRel(from, to).replace(/\\\\/gi, '/')\n\nimport {\n  encapsulateCSS,\n  importantizeCSS,\n  escape,\n  freeLint,\n  freeScope,\n  freeText,\n  Internal,\n  splitWords,\n  upperFirst\n} from \"../utils\";\n\nconst _ = Symbol(\"_ViewWriter\");\nconst htmltojsx = new HTMLtoJSX({ createClass: false });\n\nconst flattenChildren = (children = [], flatten = []) => {\n  children.forEach(child => {\n    flattenChildren(child[_].children, flatten);\n  });\n\n  flatten.push(...children);\n\n  return flatten;\n};\n\nconst adjustImagesToRoot = (html) => html.replace(/src=\"/ig, 'src=\"/');\nconst removeHtmlFromLinks = (html) => adjustImagesToRoot(html.replace('index.html', '').replace(/\\.html/ig, '').replace(/href=\"/ig, 'href=\"/'))\n\n@Internal(_)\nclass ViewWriter extends Writer {\n  static async writeAll(viewWriters, dir, componentDir, metaDir, stylesDir, ctrlsDir) {\n    await mkdirp(dir);\n    await mkdirp(componentDir);\n    await mkdirp(stylesDir);\n    await mkdirp(metaDir);\n    // await mkdirp(`${dir}/../../server`);\n\n    // const serverPromises = [\n    //   fs.writeFile(`${dir}/../../server/index.js`, freeLint(ServerIndex)),\n    //   fs.writeFile(`${dir}/../../server/server.js`, freeLint(ServerServer)),\n    //   fs.writeFile(`${dir}/../../server/loader.js`, freeLint(ServerLoader))\n    // ]\n\n    // await Promise.all(serverPromises);\n\n\n    const indexFilePath = `${dir}/index.js`;\n    const helpersFilePath = `${dir}/../helpers.js`;\n    const routesFilePath = `${dir}/../routes.js`;\n    const childFilePaths = [indexFilePath, helpersFilePath, routesFilePath];\n    ctrlsDir = path.relative(dir, ctrlsDir);\n    const routes = `\nimport React from 'react';\nimport { Route } from 'react-router-dom';\nimport * as Views from './views';\n\nexport default () => [\n  <Route key=\"route_index\" path=\"/\" component={Views.IndexView} exact />,\n  ${viewWriters\n    .map(\n      viewWriter => `<Route key=\"route_${viewWriter.className.replace(/view/gi, '')}\" path=\"${viewWriter.parent ? `/${viewWriter.parent}` : ''}/${viewWriter.className.replace(/view/gi, '').split(/(?=[A-Z])/).join('-').toLowerCase()}\" component={Views.${viewWriter.className}} exact />`\n    )\n    .join(\",\\n  \")}\n]`;\n    const index = viewWriters\n      .map(viewWriter => {\n        return `export { default as ${viewWriter.className} } from './${\n          viewWriter.className\n        }'`;\n      })\n      .join(\"\\n\");\n\n    const leanViewWriters = []\n    viewWriters = flattenChildren(viewWriters);\n\n    for(const viewWriter of viewWriters) {\n      if(!leanViewWriters.find(vw => vw.className === viewWriter.className)) {\n        leanViewWriters.push(viewWriter);\n      }\n    }\n    leanViewWriters.forEach( async viewWriter => {\n      const filePaths = await viewWriter.write(dir, componentDir, metaDir, stylesDir, ctrlsDir);\n      childFilePaths.push(...filePaths);\n    })\n\n\n\n    const writtingRoutes = fs.writeFile(routesFilePath, freeLint(routes));\n    const writingIndex = fs.writeFile(indexFilePath, freeLint(index));\n    const writingHelpers = fs.writeFile(helpersFilePath, raw.viewHelpers);\n\n    await Promise.all([writingIndex, writingHelpers, writtingRoutes]);\n    return childFilePaths;\n  }\n\n  get baseUrl() {\n    return this[_].baseUrl;\n  }\n\n  set baseUrl(baseUrl) {\n    this[_].baseUrl = String(baseUrl);\n  }\n\n  set isComponent(comp) {\n    this[_].isComponent = comp;\n  }\n\n  get isComponent() {\n    return this[_].isComponent;\n  }\n\n  get children() {\n    return this[_].children.slice();\n  }\n\n  set name(name) {\n    if (!isNaN(Number(name))) {\n      name = statuses[name];\n    }\n\n    const words = splitWords(name);\n    Object.assign(this[_], {\n      ctrlClassName: words\n        .concat(\"controller\")\n        .map(upperFirst)\n        .join(\"\"),\n      metaClassName: words\n        .concat(\"meta\")\n        .map(upperFirst)\n        .join(\"\"),\n      className: words\n        .concat(\"view\")\n        .map(upperFirst)\n        .join(\"\"),\n      elName: words.map(word => word.toLowerCase()).join(\"-\"),\n      name: words\n        .concat(\"view\")\n        .map(word => word.toLowerCase())\n        .join(\"-\")\n    });\n  }\n\n  get name() {\n    return this[_].name;\n  }\n\n  get ctrlClassName() {\n    return this[_].ctrlClassName;\n  }\n\n  get metaClassName() {\n    return this[_].metaClassName;\n  }\n\n  get className() {\n    return this[_].className;\n  }\n\n  get elName() {\n    return this[_].elName;\n  }\n\n  set html(html) {\n    if (!html) {\n      this[_].html = \"\";\n      this[_].children = [];\n      return;\n    }\n\n    const children = (this[_].children = []);\n    const $ = cheerio.load(html);\n\n    // Encapsulate styles\n    $(\"style\").each((i, el) => {\n      const $el = $(el);\n      const html = $el.html();\n\n      let css = encapsulateCSS(html, this.source);\n      css = importantizeCSS(css);\n      $el.html(css);\n    });\n\n    $(\"*\").each((i, el) => {\n      const $el = $(el);\n      let className = $el.attr(\"class\");\n\n      if (className && !/af-class-/.test(className)) {\n        className = className.replace(/([\\w_-]+)/g, \"af-class-$1\");\n\n        switch (this.source) {\n          case \"webflow\":\n            className = className.replace(/af-class-w-/g, \"w-\");\n            break;\n          case \"sketch\":\n            className = className\n              .replace(/af-class-anima-/g, \"anima-\")\n              .replace(\n                /af-class-([\\w_-]+)an-animation([\\w_-]+)/g,\n                \"$1an-animation$2\"\n              );\n            break;\n          default:\n            className = className\n              .replace(/af-class-w-/g, \"w-\")\n              .replace(/af-class-anima-/g, \"anima-\")\n              .replace(\n                /af-class-([\\w_-]+)an-animation([\\w_-]+)/g,\n                \"$1an-animation$2\"\n              );\n        }\n\n        $el.attr(\"class\", className);\n      }\n    });\n\n    // console.log(this[_].className, ($(\"[af-el]\") || []).length)\n\n    let el = $(\"[af-el]\")[0];\n    while (el) {\n\n      const $el = $(el);\n      const elName = $el.attr(\"af-el\");\n      const $afEl = $(`<af-${elName}></af-${elName}>`);\n      // const sock = $el.attr(\"af-sock\");\n      // $afEl.attr(\"af-sock\", $el.attr(\"af-sock\"));\n      $el.attr(\"af-el\", null);\n      // $el.attr(\"af-sock\", null);\n      $afEl.insertAfter($el);\n      // if (sock !== null && sock !== undefined) {\n      //   $el.prepend(`<span af-sock=\"${sock}\">`);\n      //   $el.append('</span>');\n      // }\n      $el.remove();\n\n      const child = new ViewWriter({\n        name: elName,\n        html: $.html($el),\n        baseUrl: this.baseUrl,\n        styles: this.styles,\n        isComponent: true\n      });\n\n      children.push(child);\n      el = $(\"[af-el]\")[0];\n    }\n\n    // Apply ignore rules AFTER child elements were plucked\n    $(\"[af-ignore]\").remove();\n    // Empty inner HTML\n    $(\"[af-empty]\")\n      .html(\"\")\n      .attr(\"af-empty\", null);\n\n    this[_].scripts = [];\n\n    // Set inline scripts. Will be loaded once component has been mounted\n    $(\"script\").each((i, script) => {\n      const $script = $(script);\n      const src = $script.attr(\"src\");\n      const type = $script.attr(\"type\");\n\n      // We're only interested in JavaScript script tags\n      if (type && !/javascript/i.test(type)) return;\n\n      if (src) {\n        this[_].scripts.push({\n          type: \"src\",\n          body: src\n        });\n      } else {\n        this[_].scripts.push({\n          type: \"code\",\n          body: $script.html()\n        });\n      }\n\n      $script.remove();\n    });\n\n    // Wrapping with .af-view will apply encapsulated CSS\n    const $body = $(\"body\");\n    const $afContainer = $('<span class=\"af-view\" style=\"width:100%;height:100%;\"></span>');\n\n    $afContainer.append($body.contents());\n    $afContainer.prepend(\"\\n  \");\n    $afContainer.append(\"\\n  \");\n    $body.append($afContainer);\n\n    html = $body.html();\n\n    this[_].html = html;\n\n    const sockets = (this[_].sockets = []);\n\n    // Find root sockets\n    $(\"[af-sock]\").each((i, el) => {\n      const $el = $(el);\n      const socketName = $el.attr(\"af-sock\");\n      sockets.push(socketName);\n\n      $el.attr(\"af-sock\", null);\n      // Workaround would help identify the closing tag\n      el.tagName += `-af-sock-${socketName}`;\n    });\n\n    // Refetch modified html\n    html = $body.html();\n\n\n\n    // Transforming HTML into JSX\n    let jsx = htmltojsx.convert(removeHtmlFromLinks(html)).trim();\n\n    // DETECT LIST\n    children.forEach((child, index) => {\n      const isList = (new RegExp(`(<af-${child.elName} />\\\\s+){2,}`, \"\")).exec(jsx);\n      if (isList) {\n        this[_].sockets.push(`${camelize(child.className)}List${index}`)\n        jsx = jsx.replace(\n          new RegExp(`(<af-${child.elName} />\\\\s+){2,}`, \"\"),\n          `{map(proxies['${camelize(child.className)}List${index}'], props => <React.Fragment ${mergeProps(\n            ''\n          )}>{props.children ? props.children : null}</React.Fragment>)}`\n\n        );\n      } else {\n        jsx = jsx.replace(\n          new RegExp(`(<af-${child.elName} />\\\\s*)+`, !this[_].isComponent ? \"g\" : \"\"),\n          !this[_].isComponent ? `<${child.className}.Controller {...this.props}/>` :\n          `{map(proxies['${child.className}-${index}'], props => <${child.className}.Controller ${mergeProps(\n            ''\n          )}>{props.children ? props.children : null}</${child.className}.Controller>)}`\n\n        );\n      }\n    });\n\n    // Bind controller to view\n    this[_].jsx = bindJSX(jsx, children);\n  }\n\n  get scripts() {\n    return this[_].scripts ? this[_].scripts.slice() : [];\n  }\n\n  get styles() {\n    return this[_].styles.slice();\n  }\n\n  get html() {\n    return this[_].html;\n  }\n\n  get jsx() {\n    return this[_].jsx;\n  }\n\n  get sockets() {\n    return this[_].sockets && [...this[_].sockets];\n  }\n\n  get source() {\n    return this[_].source;\n  }\n\n  set source(source) {\n    this[_].source = String(source);\n  }\n\n  constructor(options) {\n    super();\n\n    this[_].children = [];\n    this[_].styles = options.styles || [];\n\n    this.name = options.name;\n    this.parent = options.parent;\n    this.isComponent = options.isComponent;\n    this.html = options.html;\n    this.source = options.source;\n  }\n\n  async write(dir, componentDir, metaDir, stylesDir, ctrlsDir) {\n    const filePath = `${dir}/${this.className}.js`;\n    const childFilePaths = [filePath];\n    const writingChildren = this[_].children.map(async child => {\n      if(!writingFiles.includes(child.className)){\n        writingFiles.push(child.className);\n        const filePaths = await child.write(componentDir, componentDir, metaDir, stylesDir, ctrlsDir);\n        childFilePaths.push(...filePaths);\n      }\n    });\n    const isNestedComponent = dir === componentDir;\n    let writingSelf\n\n    if (!writingFiles.includes(`${this.className}.js`)) {\n      try {\n        await fs.readFile(`${dir}/${this.className}.js`);\n      } catch(e) {\n        // pass\n        writingSelf = fs.writeFile(\n          `${dir}/${this.className}.js`,\n          this[_].compose(\n            path.relative(dir, componentDir),\n            path.relative(dir, metaDir),\n            path.relative(dir, stylesDir),\n            ctrlsDir,\n            !isNestedComponent\n          )\n        )\n      }\n    }\n\n\n    try {\n      await Promise.all([...writingChildren, writingSelf]);\n    } catch(e) {\n      console.log(e);\n    }\n    return childFilePaths;\n  }\n\n  async setStyle(href, content, stylesDir) {\n    let type;\n    let body;\n\n    if (href) {\n      type = \"href\";\n      body = /^\\w+:\\/\\//.test(href) ? href : path.resolve(\"/\", href);\n    } else {\n      type = \"sheet\";\n      body = content;\n    }\n\n    const exists = this[_].styles.some(style => {\n      return style.body == body;\n    });\n\n    if (!exists) {\n      this[_].styles.push({ type, body });\n    }\n\n    const sheets = this[_].styles\n      .map(({ type, body }) => {\n        return type == \"sheet\" && body;\n      })\n      .filter(Boolean);\n\n    let css = \"\";\n\n    // css += hrefs.map((href) => {\n    //   return `@import url(${href});`\n    // }).join('\\n')\n\n\n    css += \"\\n\\n\";\n\n    css += sheets\n      .map(sheet => {\n        return sheet;\n      })\n      .join(\"\\n\\n\");\n    if(!stylesDir || !css.length) return true;\n    try {\n      await mkdirp(stylesDir);\n      await fs.writeFile(`${stylesDir}/${this.className}.css` , escape(css.trim()));\n    } catch(e) {\n      console.log(e);\n    }\n  }\n\n  _compose(compDir, metaDir, stylesDir, ctrlsDir, shouldHaveStyles = true) {\n    return freeLint(`\n      import React from 'react'\n      import { createScope, map, transformProxies } from '../helpers'\n      ${shouldHaveStyles ? `import \"${stylesDir}/${this.className}.css\"` : ''}\n      ==>${this[_].composeChildImports(compDir)}<==\n\n      let Controller\n\n      class ${this.className} extends React.Component {\n        static get Controller() {\n          if (Controller) return Controller\n\n          try {\n            Controller = require('${ctrlsDir}/${this.ctrlClassName}')\n            Controller = Controller.default || Controller\n\n            return Controller\n          }\n          catch (e) {\n            if (e.code == 'MODULE_NOT_FOUND') {\n              Controller = ${this.className}\n\n              return Controller\n            }\n\n            throw e\n          }\n        }\n\n        render() {\n          const proxies = Controller !== ${\n            this.className\n          } ? transformProxies(this.props.children) : {\n            ==>${this[_].composeProxiesDefault()}<==\n          }\n\n          ${this[_].isComponent ? '' : `\n          let Metadata\n          try {\n            Metadata = require(\"${metaDir}/${this.metaClassName}\")\n            Metadata = Metadata.default || Metadata\n          } catch (e) {\n            // pass\n            Metadata = null;\n          }\n          try {\n            Metadata = require(\"${metaDir}/defaultMeta\")\n            Metadata = Metadata.default || Metadata\n          } catch (e) {\n            // pass\n            Metadata = null;\n          }\n          `}\n\n\n          return (\n            <React.Fragment>\n              ${!this[_].isComponent ? '{Metadata ? <Metadata {...this.props} /> : null}' : ''}\n              ==>${this.jsx}<==\n            </React.Fragment>\n          )\n        }\n      }\n\n      export default ${this.className}\n    `);\n  }\n\n  _composeStyleImports() {\n    // const hrefs = this[_].styles.map(({ type, body }) => {\n    //   return type == 'href' && body\n    // }).filter(Boolean)\n\n    const sheets = this[_].styles\n      .map(({ type, body }) => {\n        return type == \"sheet\" && body;\n      })\n      .filter(Boolean);\n\n    let css = \"\";\n\n    // css += hrefs.map((href) => {\n    //   return `@import url(${href});`\n    // }).join('\\n')\n\n    css += \"\\n\\n\";\n\n    css += sheets\n      .map(sheet => {\n        return sheet;\n      })\n      .join(\"\\n\\n\");\n\n    return escape(css.trim());\n  }\n\n  _composeProxiesDefault() {\n    return this[_].sockets\n      .map(socket => {\n        return `'${socket}': [],`;\n      })\n      .join(\"\\n\");\n  }\n\n  _composeChildImports(compDir) {\n    if (!compDir) {\n      compDir = '.';\n    }\n    const imported = [];\n\n    const imports = this[_].children.map(child => {\n      if (!imported.includes(child.className)) {\n        imported.push(child.className);\n        return `import ${child.className} from '${compDir}/${child.className}'`;\n      }\n    }).filter(imp => !!imp && imp.length);\n\n    // Line skip\n    imports.push(\"\");\n\n    return imports.join(\"\\n\");\n  }\n\n  _composeScriptsDeclerations() {\n    return this[_].scripts\n      .map(script => {\n        if (script.type == \"src\") {\n          return `fetch(\"${script.body}\").then(body => body.text()),`;\n        }\n\n        const minified = uglify.minify(script.body).code;\n        // Unknown script format ??? fallback to maxified version\n        const code = minified || script.body;\n\n        return `Promise.resolve(\"${escape(code)}\"),`;\n      })\n      .join(\"\\n\");\n  }\n\n  _composeScriptsInvocations() {\n    if (!this[_].scripts) return \"\";\n\n    const invoke = freeScope(\"eval(arguments[0])\", \"window\", {\n      script: null\n    });\n\n    return freeText(`\n      scripts.concat(Promise.resolve()).reduce((loaded, loading) => {\n        return loaded.then((script) => {\n          ==>${invoke}<==\n\n          return loading\n        })\n      })\n    `);\n  }\n}\n\nfunction camelize(text) {\n  return text.replace(/(?:^\\w|[A-Z]|\\b\\w)/g, function(letter, index) {\n    return index == 0 ? letter.toLowerCase() : letter.toUpperCase();\n  }).replace(/\\s+/g, '');\n}\n\nfunction bindJSX(jsx, children = []) {\n  children.forEach(child => {\n    jsx = jsx.replace(\n      new RegExp(`af-${child.elName}`, \"g\"),\n      `${child.className}.Controller`\n    );\n  });\n\n  // ORDER MATTERS\n    // Open close\n  return (\n    jsx\n      // Open close\n      .replace(\n        /<([\\w_-]+)-af-sock-([\\w_-]+)(.*?)>([^]*)<\\/\\1-af-sock-\\2>/g,\n        (match, el, sock, attrs, children) =>\n          // If there are nested sockets\n          /<[\\w_-]+-af-sock-[\\w_-]+/.test(children)\n            ? `{map(proxies['${sock}'], props => <${el} ${mergeProps(\n                attrs\n              )}>{createScope(props.children, proxies => <React.Fragment>${bindJSX(\n                children\n              )}</React.Fragment>)}</${el}>)}`\n            : `{map(proxies['${sock}'], props => <${el} ${mergeProps(\n                attrs\n              )}>{props.children ? props.children : <React.Fragment>${children}</React.Fragment>}</${el}>)}`\n      )\n      // Self closing\n      .replace(\n        /<([\\w_-]+)-af-sock-([\\w_-]+)(.*?) \\/>/g,\n        (match, el, sock, attrs) =>\n          `{map(proxies['${sock}'], props => <${el} ${mergeProps(\n            attrs\n          )}>{props.children}</${el}>)}`\n      )\n  );\n}\n\n// Merge props along with class name\nfunction mergeProps(attrs) {\n  attrs = attrs.trim();\n\n  if (!attrs) {\n    return \"{...props}\";\n  }\n\n  let className = attrs.match(/className=\"([^\"]+)\"/);\n\n  if (!className) {\n    return `${attrs} {...props}`;\n  }\n\n  className = className[1];\n  attrs = attrs.replace(/ ?className=\"[^\"]+\"/, \"\");\n\n  return `${attrs} {...{...props, className: \\`${className} $\\{props.className || ''}\\`}}`.trim();\n}\n\nexport default ViewWriter;\n","module.exports = require(\"htmltojsx\");","module.exports = require(\"statuses\");","module.exports = require(\"uglify-js\");","import path from 'path'\nimport { requireText } from '../utils'\n\nconst resolve = filename => path.resolve(__dirname, '../src/raw', filename)\n\n// Exporting an object since we're dealing with a getter\nexport default {\n  get viewHelpers() {\n    return requireText(resolve('viewHelpers.js'))\n  }\n}\n","import fetch from 'node-fetch'\nimport path from 'path'\nimport uglify from 'uglify-js'\nimport { fs, mkdirp } from '../libs'\nimport Writer from './writer'\n\nimport {\n  Internal,\n  escape,\n  freeText,\n  freeLint,\n  freeContext,\n  padLeft,\n  requireText,\n} from '../utils'\n\nconst _ = Symbol('_ScriptWriter')\n\n@Internal(_)\nclass ScriptWriter extends Writer {\n  get scripts() {\n    return this[_].scripts.slice()\n  }\n\n  get prefetch() {\n    return this[_].prefetch\n  }\n\n  set prefetch(prefetch) {\n    return this[_].prefetch = !!prefetch\n  }\n\n  get baseUrl() {\n    return this[_].baseUrl\n  }\n\n  set baseUrl(baseUrl) {\n    this[_].baseUrl = String(baseUrl)\n  }\n\n  constructor(options = {}) {\n    super()\n\n    this[_].scripts = []\n\n    this.baseUrl = options.baseUrl\n    this.prefetch = options.prefetch\n  }\n\n  async write(dir, options) {\n    await mkdirp(dir)\n\n    options = {\n      ...options,\n      prefetch: this.prefetch,\n    }\n\n    const indexFilePath = `${dir}/index.js`\n    const childFilePaths = [indexFilePath]\n\n    if (!options.prefetch) {\n      await fs.writeFile(indexFilePath, this[_].composeScriptLoader())\n      return childFilePaths\n    }\n\n    const scriptFileNames = this.scripts.map((script, index, { length }) => {\n      const fileName = padLeft(index, length / 10 + 1, 0) + '.js'\n      const filePath = `${dir}/${fileName}`\n      childFilePaths.push(filePath)\n\n      return fileName\n    })\n\n    const fetchingScripts = this.scripts.map(async (script, index) => {\n      const scriptFileName = scriptFileNames[index]\n\n      let code = script.type == 'code'\n        ? script.body\n        : /^http/.test(script.body)\n        ? await fetch(script.body)\n          .then(res => res.text())\n          .then(text => uglify.minify(text).code)\n        : requireText(`${this.baseUrl}/${script.body}`)\n      code = code.replace(/\\n\\/\\/# ?sourceMappingURL=.*\\s*$/, '')\n      code = freeContext(code)\n\n      return fs.writeFile(`${dir}/${scriptFileName}`, code)\n    })\n\n    const scriptsIndexContent = scriptFileNames.map((scriptFileName) => {\n      return `import './${scriptFileName}'`\n    }).join('\\n')\n\n    const writingIndex = fs.writeFile(\n      indexFilePath,\n      freeLint(scriptsIndexContent),\n    )\n\n    await Promise.all([\n      ...fetchingScripts,\n      writingIndex,\n    ])\n\n    return childFilePaths\n  }\n\n  setScript(src, content) {\n    let type\n    let body\n\n    if (src) {\n      type = 'src'\n      body = /^\\w+:\\/\\//.test(src) ? src : path.resolve('/', src)\n    }\n    else {\n      type = 'code'\n      body = uglify.minify(content).code\n    }\n\n    const exists = this[_].scripts.some((script) => {\n      return script.body == body\n    })\n\n    if (!exists) {\n      this[_].scripts.push({ type, body })\n    }\n  }\n\n  _composeScriptLoader() {\n    const scripts = this[_].scripts.map((script) => {\n      return freeText(`\n        {\n          type: '${script.type}',\n          body: '${escape(script.body, \"'\")}',\n        },\n      `)\n    }).join('\\n')\n\n    return freeLint(`\n      const scripts = [\n        ==>${scripts}<==\n      ]\n\n      const loadingScripts = scripts.reduce((loaded, script) => loaded.then(() => {\n        const scriptEl = document.createElement('script')\n        scriptEl.type = 'text/javascript'\n        let loading\n\n        if (script.type == 'src') {\n          scriptEl.src = script.body\n\n          loading = new Promise((resolve, reject) => {\n            scriptEl.onload = resolve\n            scriptEl.onerror = reject\n          })\n        }\n        else {\n          scriptEl.innerHTML = script.body\n\n          loading = Promise.resolve()\n        }\n\n        document.head.appendChild(scriptEl)\n\n        return loading\n      }), Promise.resolve())\n\n      export default loadingScripts\n    `)\n  }\n}\n\nexport default ScriptWriter\n","module.exports = require(\"node-fetch\");","import CleanCSS from 'clean-css'\nimport fetch from 'node-fetch'\nimport path from 'path'\nimport { fs, mkdirp } from '../libs'\nimport { encapsulateCSS } from '../utils'\nimport Writer from './writer'\n\nimport {\n  Internal,\n  escape,\n  freeText,\n  freeLint,\n  padLeft,\n  requireText,\n} from '../utils'\n\nconst _ = Symbol('_StyleWriter')\nconst cleanCSS = new CleanCSS({\n  rebaseTo: '..'\n})\n\n@Internal(_)\nclass StyleWriter extends Writer {\n  get styles() {\n    return this[_].styles.slice()\n  }\n\n  get prefetch() {\n    return this[_].prefetch\n  }\n\n  set prefetch(prefetch) {\n    return this[_].prefetch = !!prefetch\n  }\n\n  get baseUrl() {\n    return this[_].baseUrl\n  }\n\n  set baseUrl(baseUrl) {\n    this[_].baseUrl = String(baseUrl)\n  }\n\n  get source() {\n    return this[_].source\n  }\n\n  set source(source) {\n    this[_].source = String(source)\n  }\n\n  constructor(options = {}) {\n    super()\n\n    this[_].styles = []\n\n    this.baseUrl = options.baseUrl\n    this.prefetch = options.prefetch\n    this.source = options.srouce\n  }\n\n  async write(dir, options) {\n    await mkdirp(dir)\n\n    options = {\n      ...options,\n      prefetch: this.prefetch,\n    }\n\n    const indexFilePath = `${dir}/index.js`\n    const childFilePaths = [indexFilePath]\n\n    if (!options.prefetch) {\n      await fs.writeFile(indexFilePath, this[_].composeStyleLoader())\n      return childFilePaths\n    }\n\n    const styleFileNames = this.styles.map((style, index, { length }) => {\n      const fileName = padLeft(index, length / 10 + 1, 0) + '.css'\n      const filePath = `${dir}/${fileName}`\n      childFilePaths.push(filePath)\n\n      return fileName\n    })\n\n    const fetchingStyles = this.styles.map(async (style, index) => {\n      const styleFileName = styleFileNames[index]\n\n      const sheet = style.type == 'sheet'\n        ? style.body\n        : /^http/.test(style.body)\n        ? await fetch(style.body).then(res => res.text())\n        : await requireText.promise(`${this.baseUrl}/${style.body}`)\n\n      return fs.writeFile(`${dir}/${styleFileName}`, this[_].transformSheet(sheet))\n    })\n\n    const stylesIndexContent = styleFileNames.map((styleFileName) => {\n      return `import './${styleFileName}'`\n    }).join('\\n')\n\n    const writingIndex = fs.writeFile(\n      indexFilePath,\n      freeLint(stylesIndexContent),\n    )\n\n    await Promise.all([\n      ...fetchingStyles,\n      writingIndex,\n    ])\n\n    return childFilePaths\n  }\n\n  setStyle(href, content) {\n    let type\n    let body\n\n    if (href) {\n      type = 'href'\n      body = /^\\w+:\\/\\//.test(href) ? href : path.resolve('/', href)\n    }\n    else {\n      type = 'sheet'\n      body = content\n    }\n\n    const exists = this[_].styles.some((style) => {\n      return style.body == body\n    })\n\n    if (!exists) {\n      this[_].styles.push({ type, body })\n    }\n  }\n\n  _composeStyleLoader() {\n    this[_].styles.forEach((style) => {\n      if (style.type == 'sheet') {\n        style.body = this[_].transformSheet(style.body)\n      }\n    })\n\n    const styles = this[_].styles.map((style) => {\n      return freeText(`\n        {\n          type: '${style.type}',\n          body: '${escape(style.body, \"'\")}',\n        },\n      `)\n    }).join('\\n')\n\n    return freeLint(`\n      const styles = [\n        ==>${styles}<==\n      ]\n\n      const loadingStyles = styles.map((style) => {\n        let styleEl\n        let loading\n\n        if (style.type == 'href') {\n          styleEl = document.createElement('link')\n\n          loading = new Promise((resolve, reject) => {\n            styleEl.onload = resolve\n            styleEl.onerror = reject\n          })\n\n          styleEl.rel = 'stylesheet'\n          styleEl.type = 'text/css'\n          styleEl.href = style.body\n        }\n        else {\n          styleEl = document.createElement('style')\n          styleEl.type = 'text/css'\n          styleEl.innerHTML = style.body\n\n          loading = Promise.resolve()\n        }\n\n        document.head.appendChild(styleEl)\n\n        return loading\n      })\n\n      export default Promise.all(loadingStyles).then(() => {\n        const styleSheets = Array.from(document.styleSheets).filter((styleSheet) => {\n          return styleSheet.href && styles.some((style) => {\n            return style.type == 'href' && styleSheet.href.match(style.body)\n          })\n        })\n        styleSheets.forEach((styleSheet) => {\n          Array.from(styleSheet.rules).forEach((rule) => {\n            if (rule.selectorText) {\n              rule.selectorText = rule.selectorText\n                .replace(/\\\\.([\\\\w_-]+)/g, '.af-class-$1')\n                .replace(/\\\\[class(.?)=\"( ?)([^\"]+)( ?)\"\\\\]/g, '[class$1=\"$2af-class-$3$4\"]')\n                .replace(/([^\\\\s][^,]*)(\\\\s*,?)/g, '.af-view $1$2')\n                .replace(/\\\\.af-view html/g, '.af-view')\n                .replace(/\\\\.af-view body/g, '.af-view')\n                ==>${this[_].composeSourceReplacements()}<==\n            }\n          })\n        })\n      })\n    `)\n  }\n\n  _composeSourceReplacements() {\n    switch (this.source) {\n      case 'webflow':\n        return freeText(`\n          .replace(/af-class-w-/g, 'w-')\n        `)\n      case 'sketch':\n        return freeText(`\n          .replace(/af-class-anima-/g, 'anima-')\n          .replace(/af-class-([\\\\w_-]+)an-animation([\\\\w_-]+)/g, '$1an-animation$2')\n        `)\n      default:\n        return freeText(`\n          .replace(/af-class-w-/g, 'w-')\n          .replace(/af-class-anima-/g, 'anima-')\n          .replace(/af-class-([\\\\w_-]+)an-animation([\\\\w_-]+)/g, '$1an-animation$2')\n        `)\n    }\n  }\n\n  // Will minify and encapsulate classes\n  _transformSheet(sheet) {\n    sheet = encapsulateCSS(sheet, this.source)\n    sheet = cleanCSS.minify(sheet).styles\n\n    // Make URLs absolute so webpack won't throw any errors\n    return sheet.replace(/url\\(([^)]+)\\)/g, (match, url) => {\n      if (/^(.+):\\/\\//.test(url)) return match\n\n      url = path.resolve('/', url)\n      return `url(${url})`\n    })\n  }\n}\n\nexport default StyleWriter\n","module.exports = require(\"clean-css\");"],"sourceRoot":""}